var need={modules:{}},resolveDependencies=function(e,t){if(!e)throw"No module name was provided.";var n=need.modules[e];if(!n)throw"Unable to find module definition for module '"+e+"'.";var r=n.dependencies,i=[];for(var s=0;s<r.length;s++){var o=r[s],u=need.modules[o];if(!u)throw"Could not find module definition for dependency '"+o+"' of module '"+e+"' . Is it included and registered via define?";u.instance||(u.instance=resolveDependencies(r[s])),i.push(u.instance)}return t&&i.push(t),n.body.apply(null,i)},define=function(e,t,n){if(arguments.length<2||arguments.length>3)throw"Module definition is invalid.";arguments.length===2&&(n=t,t=[]),need.modules[e]={dependencies:t,body:n}},require=function(e,t){if(!e)throw"No module name provided.";var n=need.modules[e];if(!n)throw"Could not resolve module name '"+e+"' to module instance.";return n.instance||(n.instance=resolveDependencies(e,t)),n.instance};define("UXTIupZGRczsgnUj2SpAlCuuFJw3p3TtznLNsAamIcQ=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t=e.createFloatArray,n=1e-6,r={};return r.create=function(e){var n=t(4);return e?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n},r.createFrom=function(e,n,r,i){var s=t(4);return s[0]=e,s[1]=n,s[2]=r,s[3]=i,s},r.add=function(e,t,n){return n||(n=t),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},r.subtract=function(e,t,n){return n||(n=t),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},r.multiply=function(e,t,n){return n||(n=t),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n[3]=e[3]*t[3],n},r.divide=function(e,t,n){return n||(n=t),n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n[3]=e[3]/t[3],n},r.scale=function(e,t,n){return n||(n=e),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},r.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.equal=function(e,t){return e===t||Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<n&&Math.abs(e[2]-t[2])<n&&Math.abs(e[3]-t[3])<n},r.negate=function(e,t){return t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},r.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},r.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},r.lerp=function(e,t,n,r){return r||(r=e),r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r[2]=e[2]+n*(t[2]-e[2]),r[3]=e[3]+n*(t[3]-e[3]),r},r.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"},r}),define("a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","KbAjopxCmgPWADMlHwI3LDG/9Q377Jy1ev50TVA7HtE=","9h1VbSkUkR0rOE8ony/LEvlqT9hawoj6Npu6TdQx4pI="],function(e,t,n){"use strict";var r=e.createFloatArray,i=1e-6,s={};s.create=function(e){var t=r(3);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):t[0]=t[1]=t[2]=0,t},s.createFrom=function(e,t,n){var i=r(3);return i[0]=e,i[1]=t,i[2]=n,i},s.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.equal=function(e,t){return e===t||Math.abs(e[0]-t[0])<i&&Math.abs(e[1]-t[1])<i&&Math.abs(e[2]-t[2])<i},s.add=function(e,t,n){return!n||e===n?(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e):(n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n)},s.subtract=function(e,t,n){return!n||e===n?(e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e):(n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n)},s.multiply=function(e,t,n){return!n||e===n?(e[0]*=t[0],e[1]*=t[1],e[2]*=t[2],e):(n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n)},s.negate=function(e,t){return t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},s.scale=function(e,t,n){return!n||e===n?(e[0]*=t,e[1]*=t,e[2]*=t,e):(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n)},s.normalize=function(e,t){t||(t=e);var n=e[0],r=e[1],i=e[2],s=Math.sqrt(n*n+r*r+i*i);return s?s===1?(t[0]=n,t[1]=r,t[2]=i,t):(s=1/s,t[0]=n*s,t[1]=r*s,t[2]=i*s,t):(t[0]=0,t[1]=0,t[2]=0,t)},s.cross=function(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2];return n[0]=i*a-s*u,n[1]=s*o-r*a,n[2]=r*u-i*o,n},s.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},s.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},s.direction=function(e,t,n){n||(n=e);var r=e[0]-t[0],i=e[1]-t[1],s=e[2]-t[2],o=Math.sqrt(r*r+i*i+s*s);return o?(o=1/o,n[0]=r*o,n[1]=i*o,n[2]=s*o,n):(n[0]=0,n[1]=0,n[2]=0,n)},s.lerp=function(e,t,n,r){return r||(r=e),r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r[2]=e[2]+n*(t[2]-e[2]),r},s.dist=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)};var o=null,u=r(4);s.unproject=function(e,t,r,i,s){s||(s=e),o||(o=n.create());var a=o,f=u;return f[0]=(e[0]-i[0])*2/i[2]-1,f[1]=(e[1]-i[1])*2/i[3]-1,f[2]=2*e[2]-1,f[3]=1,n.multiply(r,t,a),n.inverse(a)?(n.multiplyVec4(a,f),f[3]===0?null:(s[0]=f[0]/f[3],s[1]=f[1]/f[3],s[2]=f[2]/f[3],s)):null};var a=s.createFrom(1,0,0),f=s.createFrom(0,1,0),l=s.createFrom(0,0,1),c=s.create();return s.rotationTo=function(e,n,r){r||(r=t.create());var i=s.dot(e,n),o=c;if(i>=1)t.set(t.identity,r);else if(i<1e-6-1)s.cross(a,e,o),s.length(o)<1e-6&&s.cross(f,e,o),s.length(o)<1e-6&&s.cross(l,e,o),s.normalize(o),t.fromAngleAxis(Math.PI,o,r);else{var u=Math.sqrt((1+i)*2),h=1/u;s.cross(e,n,o),r[0]=o[0]*h,r[1]=o[1]*h,r[2]=o[2]*h,r[3]=u*.5,t.normalize(r)}return r[3]>1?r[3]=1:r[3]<-1&&(r[3]=-1),r},s.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+"]"},s}),define("XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t=e.createFloatArray,n=1e-6,r={};return r.create=function(e){var n=t(2);return e?(n[0]=e[0],n[1]=e[1]):(n[0]=0,n[1]=0),n},r.createFrom=function(e,n){var r=t(2);return r[0]=e,r[1]=n,r},r.add=function(e,t,n){return n||(n=t),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n},r.subtract=function(e,t,n){return n||(n=t),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n},r.multiply=function(e,t,n){return n||(n=t),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n},r.divide=function(e,t,n){return n||(n=t),n[0]=e[0]/t[0],n[1]=e[1]/t[1],n},r.scale=function(e,t,n){return n||(n=e),n[0]=e[0]*t,n[1]=e[1]*t,n},r.dist=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},r.set=function(e,t){return t[0]=e[0],t[1]=e[1],t},r.equal=function(e,t){return e===t||Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<n},r.negate=function(e,t){return t||(t=e),t[0]=-e[0],t[1]=-e[1],t},r.normalize=function(e,t){t||(t=e);var n=e[0]*e[0]+e[1]*e[1];return n>0?(n=Math.sqrt(n),t[0]=e[0]/n,t[1]=e[1]/n):t[0]=t[1]=0,t},r.cross=function(e,t,n){var r=e[0]*t[1]-e[1]*t[0];return n?(n[0]=n[1]=0,n[2]=r,n):r},r.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},r.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},r.direction=function(e,t,n){n||(n=e);var r=e[0]-t[0],i=e[1]-t[1],s=r*r+i*i;return s?(s=1/Math.sqrt(s),n[0]=r*s,n[1]=i*s,n):(n[0]=0,n[1]=0,n[2]=0,n)},r.lerp=function(e,t,n,r){return r||(r=e),r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r},r.str=function(e){return"["+e[0]+", "+e[1]+"]"},r}),define("97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t={},n=e.createFloatArray,r=1e-6;if(e.hasFloatArraySupport()){var i=e.createFloatArray(1),s=e.createIntegerArray(i.buffer);t.invsqrt=function(e){var t=e*.5;i[0]=e;var n=1.5;s[0]=1597463007-(s[0]>>1);var r=i[0];return r*(n-t*r*r)}}else t.invsqrt=function(e){return 1/Math.sqrt(e)};return t}),define("KbAjopxCmgPWADMlHwI3LDG/9Q377Jy1ev50TVA7HtE=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","9h1VbSkUkR0rOE8ony/LEvlqT9hawoj6Npu6TdQx4pI=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk="],function(e,t,n,r){"use strict";var i=e.createFloatArray,s=1e-6,o={};o.create=function(e){var t=i(4);return e?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t[0]=t[1]=t[2]=t[3]=0,t},o.createFrom=function(e,t,n,r){var s=i(4);return s[0]=e,s[1]=t,s[2]=n,s[3]=r,s},o.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.equal=function(e,t){return e===t||Math.abs(e[0]-t[0])<s&&Math.abs(e[1]-t[1])<s&&Math.abs(e[2]-t[2])<s&&Math.abs(e[3]-t[3])<s},o.identity=function(e){return e||(e=o.create()),e[0]=0,e[1]=0,e[2]=0,e[3]=1,e};var u=o.identity();return o.calculateW=function(e,t){var n=e[0],r=e[1],i=e[2];return!t||e===t?(e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e):(t[0]=n,t[1]=r,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t)},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.inverse=function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s,u=o?1/o:0;return!t||e===t?(e[0]*=-u,e[1]*=-u,e[2]*=-u,e[3]*=u,e):(t[0]=-e[0]*u,t[1]=-e[1]*u,t[2]=-e[2]*u,t[3]=e[3]*u,t)},o.conjugate=function(e,t){return!t||e===t?(e[0]*=-1,e[1]*=-1,e[2]*=-1,e):(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t)},o.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},o.normalize=function(e,t){t||(t=e);var n=e[0],r=e[1],i=e[2],s=e[3],o=Math.sqrt(n*n+r*r+i*i+s*s);return o===0?(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t):(o=1/o,t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=s*o,t)},o.add=function(e,t,n){return!n||e===n?(e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e):(n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n)},o.multiply=function(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=e[3],u=t[0],a=t[1],f=t[2],l=t[3];return n[0]=r*l+o*u+i*f-s*a,n[1]=i*l+o*a+s*u-r*f,n[2]=s*l+o*f+r*a-i*u,n[3]=o*l-r*u-i*a-s*f,n},o.multiplyVec3=function(e,t,n){n||(n=t);var r=t[0],i=t[1],s=t[2],o=e[0],u=e[1],a=e[2],f=e[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return n[0]=l*f+p*-o+c*-a-h*-u,n[1]=c*f+p*-u+h*-o-l*-a,n[2]=h*f+p*-a+l*-u-c*-o,n},o.scale=function(e,t,n){return!n||e===n?(e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e):(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n)},o.toMat3=function(e,n){n||(n=t.create());var r=e[0],i=e[1],s=e[2],o=e[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return n[0]=1-(p+v),n[1]=c+y,n[2]=h-g,n[3]=c-y,n[4]=1-(l+v),n[5]=d+m,n[6]=h+g,n[7]=d-m,n[8]=1-(l+p),n},o.toMat4=function(e,t){t||(t=n.create());var r=e[0],i=e[1],s=e[2],o=e[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return t[0]=1-(p+v),t[1]=c+y,t[2]=h-g,t[3]=0,t[4]=c-y,t[5]=1-(l+v),t[6]=d+m,t[7]=0,t[8]=h+g,t[9]=d-m,t[10]=1-(l+p),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.slerp=function(e,t,n,r){r||(r=e);var i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],s,o,u,a;return Math.abs(i)>=1?(r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3]),r):(s=Math.acos(i),o=Math.sqrt(1-i*i),Math.abs(o)<.001?(r[0]=e[0]*.5+t[0]*.5,r[1]=e[1]*.5+t[1]*.5,r[2]=e[2]*.5+t[2]*.5,r[3]=e[3]*.5+t[3]*.5,r):(u=Math.sin((1-n)*s)/o,a=Math.sin(n*s)/o,r[0]=e[0]*u+t[0]*a,r[1]=e[1]*u+t[1]*a,r[2]=e[2]*u+t[2]*a,r[3]=e[3]*u+t[3]*a,r))},o.fromRotationMatrix=function(e,t){t||(t=o.create());var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[7]-e[5])*r,t[1]=(e[2]-e[6])*r,t[2]=(e[3]-e[1])*r;else{var i=o.fromRotationMatrix.s_iNext=o.fromRotationMatrix.s_iNext||[1,2,0],s=0;e[4]>e[0]&&(s=1),e[8]>e[s*3+s]&&(s=2);var u=i[s],a=i[u];r=Math.sqrt(e[s*3+s]-e[u*3+u]-e[a*3+a]+1),t[s]=.5*r,r=.5/r,t[3]=(e[a*3+u]-e[u*3+a])*r,t[u]=(e[u*3+s]+e[s*3+u])*r,t[a]=(e[a*3+s]+e[s*3+a])*r}return t},function(){var e=t.create();o.fromAxes=function(t,n,r,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=t[0],e[5]=t[1],e[8]=t[2],o.fromRotationMatrix(e,i)}}(),o.fromAngleAxis=function(e,t,n){n||(n=o.create());var r=e*.5,i=Math.sin(r);return n[3]=Math.cos(r),n[0]=i*t[0],n[1]=i*t[1],n[2]=i*t[2],n},o.toAngleAxis=function(e,t){t||(t=e);var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(n>0){t[3]=2*Math.acos(e[3]);var i=r.invsqrt(n);t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i}else t[3]=0,t[0]=1,t[1]=0,t[2]=0;return t},o.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"},o}),define("9h1VbSkUkR0rOE8ony/LEvlqT9hawoj6Npu6TdQx4pI=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks="],function(e,t){"use strict";var n=e.createFloatArray,r=1e-6,i={};return i.create=function(e){var t=n(16);return e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},i.createFrom=function(e,t,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=n(16);return g[0]=e,g[1]=t,g[2]=r,g[3]=i,g[4]=s,g[5]=o,g[6]=u,g[7]=a,g[8]=f,g[9]=l,g[10]=c,g[11]=h,g[12]=p,g[13]=d,g[14]=v,g[15]=m,g},i.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.equal=function(e,t){return e===t||Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<r&&Math.abs(e[2]-t[2])<r&&Math.abs(e[3]-t[3])<r&&Math.abs(e[4]-t[4])<r&&Math.abs(e[5]-t[5])<r&&Math.abs(e[6]-t[6])<r&&Math.abs(e[7]-t[7])<r&&Math.abs(e[8]-t[8])<r&&Math.abs(e[9]-t[9])<r&&Math.abs(e[10]-t[10])<r&&Math.abs(e[11]-t[11])<r&&Math.abs(e[12]-t[12])<r&&Math.abs(e[13]-t[13])<r&&Math.abs(e[14]-t[14])<r&&Math.abs(e[15]-t[15])<r},i.identity=function(e){return e||(e=i.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.transpose=function(e,t){if(!t||e===t){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],u=e[11];return e[1]=e[4],e[2]=e[8],e[3]=e[12],e[4]=n,e[6]=e[9],e[7]=e[13],e[8]=r,e[9]=s,e[11]=e[14],e[12]=i,e[13]=o,e[14]=u,e}return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},i.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15];return p*l*u*i-f*d*u*i-p*o*c*i+s*d*c*i+f*o*v*i-s*l*v*i-p*l*r*a+f*d*r*a+p*n*c*a-t*d*c*a-f*n*v*a+t*l*v*a+p*o*r*h-s*d*r*h-p*n*u*h+t*d*u*h+s*n*v*h-t*o*v*h-f*o*r*m+s*l*r*m+f*n*u*m-t*l*u*m-s*n*c*m+t*o*c*m},i.inverse=function(e,t){t||(t=e);var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],a=e[6],f=e[7],l=e[8],c=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T,M;return O?(M=1/O,t[0]=(u*A-a*L+f*k)*M,t[1]=(-r*A+i*L-s*k)*M,t[2]=(v*x-m*S+g*E)*M,t[3]=(-c*x+h*S-p*E)*M,t[4]=(-o*A+a*C-f*N)*M,t[5]=(n*A-i*C+s*N)*M,t[6]=(-d*x+m*w-g*b)*M,t[7]=(l*x-h*w+p*b)*M,t[8]=(o*L-u*C+f*T)*M,t[9]=(-n*L+r*C-s*T)*M,t[10]=(d*S-v*w+g*y)*M,t[11]=(-l*S+c*w-p*y)*M,t[12]=(-o*k+u*N-a*T)*M,t[13]=(n*k-r*N+i*T)*M,t[14]=(-d*E+v*b-m*y)*M,t[15]=(l*E-c*b+h*y)*M,t):null},i.toRotationMat=function(e,t){return t||(t=i.create()),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.toMat3=function(e,n){return n||(n=t.create()),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},i.toInverseMat3=function(e,n){var r=e[0],i=e[1],s=e[2],o=e[4],u=e[5],a=e[6],f=e[8],l=e[9],c=e[10],h=c*u-a*l,p=-c*o+a*f,d=l*o-u*f,v=r*h+i*p+s*d,m;return v?(m=1/v,n||(n=t.create()),n[0]=h*m,n[1]=(-c*i+s*l)*m,n[2]=(a*i-s*u)*m,n[3]=p*m,n[4]=(c*r-s*f)*m,n[5]=(-a*r+s*o)*m,n[6]=d*m,n[7]=(-l*r+i*f)*m,n[8]=(u*r-i*o)*m,n):null},i.multiply=function(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=e[6],l=e[7],c=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15],b=t[0],w=t[1],E=t[2],S=t[3];return n[0]=b*r+w*u+E*c+S*v,n[1]=b*i+w*a+E*h+S*m,n[2]=b*s+w*f+E*p+S*g,n[3]=b*o+w*l+E*d+S*y,b=t[4],w=t[5],E=t[6],S=t[7],n[4]=b*r+w*u+E*c+S*v,n[5]=b*i+w*a+E*h+S*m,n[6]=b*s+w*f+E*p+S*g,n[7]=b*o+w*l+E*d+S*y,b=t[8],w=t[9],E=t[10],S=t[11],n[8]=b*r+w*u+E*c+S*v,n[9]=b*i+w*a+E*h+S*m,n[10]=b*s+w*f+E*p+S*g,n[11]=b*o+w*l+E*d+S*y,b=t[12],w=t[13],E=t[14],S=t[15],n[12]=b*r+w*u+E*c+S*v,n[13]=b*i+w*a+E*h+S*m,n[14]=b*s+w*f+E*p+S*g,n[15]=b*o+w*l+E*d+S*y,n},i.multiplyVec3=function(e,t,n){n||(n=t);var r=t[0],i=t[1],s=t[2];return n[0]=e[0]*r+e[4]*i+e[8]*s+e[12],n[1]=e[1]*r+e[5]*i+e[9]*s+e[13],n[2]=e[2]*r+e[6]*i+e[10]*s+e[14],n},i.multiplyVec4=function(e,t,n){n||(n=t);var r=t[0],i=t[1],s=t[2],o=t[3];return n[0]=e[0]*r+e[4]*i+e[8]*s+e[12]*o,n[1]=e[1]*r+e[5]*i+e[9]*s+e[13]*o,n[2]=e[2]*r+e[6]*i+e[10]*s+e[14]*o,n[3]=e[3]*r+e[7]*i+e[11]*s+e[15]*o,n},i.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o,u,a,f,l,c,h,p,d,v,m,g;return!n||e===n?(e[12]=e[0]*r+e[4]*i+e[8]*s+e[12],e[13]=e[1]*r+e[5]*i+e[9]*s+e[13],e[14]=e[2]*r+e[6]*i+e[10]*s+e[14],e[15]=e[3]*r+e[7]*i+e[11]*s+e[15],e):(o=e[0],u=e[1],a=e[2],f=e[3],l=e[4],c=e[5],h=e[6],p=e[7],d=e[8],v=e[9],m=e[10],g=e[11],n[0]=o,n[1]=u,n[2]=a,n[3]=f,n[4]=l,n[5]=c,n[6]=h,n[7]=p,n[8]=d,n[9]=v,n[10]=m,n[11]=g,n[12]=o*r+l*i+d*s+e[12],n[13]=u*r+c*i+v*s+e[13],n[14]=a*r+h*i+m*s+e[14],n[15]=f*r+p*i+g*s+e[15],n)},i.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2];return!n||e===n?(e[0]*=r,e[1]*=r,e[2]*=r,e[3]*=r,e[4]*=i,e[5]*=i,e[6]*=i,e[7]*=i,e[8]*=s,e[9]*=s,e[10]*=s,e[11]*=s,e):(n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6]*i,n[7]=e[7]*i,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n)},i.rotate=function(e,t,n,r){var i=n[0],s=n[1],o=n[2],u=Math.sqrt(i*i+s*s+o*o),a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M;return u?(u!==1&&(u=1/u,i*=u,s*=u,o*=u),a=Math.sin(t),f=Math.cos(t),l=1-f,c=e[0],h=e[1],p=e[2],d=e[3],v=e[4],m=e[5],g=e[6],y=e[7],b=e[8],w=e[9],E=e[10],S=e[11],x=i*i*l+f,T=s*i*l+o*a,N=o*i*l-s*a,C=i*s*l-o*a,k=s*s*l+f,L=o*s*l+i*a,A=i*o*l+s*a,O=s*o*l-i*a,M=o*o*l+f,r?e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]):r=e,r[0]=c*x+v*T+b*N,r[1]=h*x+m*T+w*N,r[2]=p*x+g*T+E*N,r[3]=d*x+y*T+S*N,r[4]=c*C+v*k+b*L,r[5]=h*C+m*k+w*L,r[6]=p*C+g*k+E*L,r[7]=d*C+y*k+S*L,r[8]=c*A+v*O+b*M,r[9]=h*A+m*O+w*M,r[10]=p*A+g*O+E*M,r[11]=d*A+y*O+S*M,r):null},i.rotateX=function(e,t,n){var r=Math.sin(t),i=Math.cos(t),s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11];return n?e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[4]=s*i+f*r,n[5]=o*i+l*r,n[6]=u*i+c*r,n[7]=a*i+h*r,n[8]=s*-r+f*i,n[9]=o*-r+l*i,n[10]=u*-r+c*i,n[11]=a*-r+h*i,n},i.rotateY=function(e,t,n){var r=Math.sin(t),i=Math.cos(t),s=e[0],o=e[1],u=e[2],a=e[3],f=e[8],l=e[9],c=e[10],h=e[11];return n?e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[0]=s*i+f*-r,n[1]=o*i+l*-r,n[2]=u*i+c*-r,n[3]=a*i+h*-r,n[8]=s*r+f*i,n[9]=o*r+l*i,n[10]=u*r+c*i,n[11]=a*r+h*i,n},i.rotateZ=function(e,t,n){var r=Math.sin(t),i=Math.cos(t),s=e[0],o=e[1],u=e[2],a=e[3],f=e[4],l=e[5],c=e[6],h=e[7];return n?e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[0]=s*i+f*r,n[1]=o*i+l*r,n[2]=u*i+c*r,n[3]=a*i+h*r,n[4]=s*-r+f*i,n[5]=o*-r+l*i,n[6]=u*-r+c*i,n[7]=a*-r+h*i,n},i.frustum=function(e,t,n,r,s,o,u){u||(u=i.create());var a=t-e,f=r-n,l=o-s;return u[0]=s*2/a,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s*2/f,u[6]=0,u[7]=0,u[8]=(t+e)/a,u[9]=(r+n)/f,u[10]=-(o+s)/l,u[11]=-1,u[12]=0,u[13]=0,u[14]=-(o*s*2)/l,u[15]=0,u},i.perspective=function(e,t,n,r,s){var o=n*Math.tan(e*Math.PI/360),u=o*t;return i.frustum(-u,u,-o,o,n,r,s)},i.ortho=function(e,t,n,r,s,o,u){u||(u=i.create());var a=t-e,f=r-n,l=o-s;return u[0]=2/a,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/f,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-2/l,u[11]=0,u[12]=-(e+t)/a,u[13]=-(r+n)/f,u[14]=-(o+s)/l,u[15]=1,u},i.lookAt=function(e,t,n,r){r||(r=i.create());var s,o,u,a,f,l,c,h,p,d,v=e[0],m=e[1],g=e[2],y=n[0],b=n[1],w=n[2],E=t[0],S=t[1],x=t[2];return v===E&&m===S&&g===x?i.identity(r):(c=v-E,h=m-S,p=g-x,d=1/Math.sqrt(c*c+h*h+p*p),c*=d,h*=d,p*=d,s=b*p-w*h,o=w*c-y*p,u=y*h-b*c,d=Math.sqrt(s*s+o*o+u*u),d?(d=1/d,s*=d,o*=d,u*=d):(s=0,o=0,u=0),a=h*u-p*o,f=p*s-c*u,l=c*o-h*s,d=Math.sqrt(a*a+f*f+l*l),d?(d=1/d,a*=d,f*=d,l*=d):(a=0,f=0,l=0),r[0]=s,r[1]=a,r[2]=c,r[3]=0,r[4]=o,r[5]=f,r[6]=h,r[7]=0,r[8]=u,r[9]=l,r[10]=p,r[11]=0,r[12]=-(s*v+o*m+u*g),r[13]=-(a*v+f*m+l*g),r[14]=-(c*v+h*m+p*g),r[15]=1,r)},i.fromRotationTranslation=function(e,t,n){n||(n=i.create());var r=e[0],s=e[1],o=e[2],u=e[3],a=r+r,f=s+s,l=o+o,c=r*a,h=r*f,p=r*l,d=s*f,v=s*l,m=o*l,g=u*a,y=u*f,b=u*l;return n[0]=1-(d+m),n[1]=h+b,n[2]=p-y,n[3]=0,n[4]=h-b,n[5]=1-(c+m),n[6]=v+g,n[7]=0,n[8]=p+y,n[9]=v-g,n[10]=1-(c+d),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},i.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+"]"},i}),define("yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t=e.createFloatArray,n=1e-6,r={};return r.create=function(e){var n=t(9);return e?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8]):n[0]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=0,n},r.createFrom=function(e,n,r,i,s,o,u,a,f){var l=t(9);return l[0]=e,l[1]=n,l[2]=r,l[3]=i,l[4]=s,l[5]=o,l[6]=u,l[7]=a,l[8]=f,l},r.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*(f*s-o*a)+n*(-f*i+o*u)+r*(a*i-s*u)},r.inverse=function(e,t){var n=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=e[6],l=e[7],c=e[8],h=c*u-a*l,p=-c*o+a*f,d=l*o-u*f,v=n*h+i*p+s*d,m;return v?(m=1/v,t||(t=r.create()),t[0]=h*m,t[1]=(-c*i+s*l)*m,t[2]=(a*i-s*u)*m,t[3]=p*m,t[4]=(c*n-s*f)*m,t[5]=(-a*n+s*o)*m,t[6]=d*m,t[7]=(-l*n+i*f)*m,t[8]=(u*n-i*o)*m,t):null},r.multiply=function(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=e[6],l=e[7],c=e[8],h=t[0],p=t[1],d=t[2],v=t[3],m=t[4],g=t[5],y=t[6],b=t[7],w=t[8];return n[0]=h*r+p*o+d*f,n[1]=h*i+p*u+d*l,n[2]=h*s+p*a+d*c,n[3]=v*r+m*o+g*f,n[4]=v*i+m*u+g*l,n[5]=v*s+m*a+g*c,n[6]=y*r+b*o+w*f,n[7]=y*i+b*u+w*l,n[8]=y*s+b*a+w*c,n},r.multiplyVec2=function(e,t,n){n||(n=t);var r=t[0],i=t[1];return n[0]=r*e[0]+i*e[3]+e[6],n[1]=r*e[1]+i*e[4]+e[7],n},r.multiplyVec3=function(e,t,n){n||(n=t);var r=t[0],i=t[1],s=t[2];return n[0]=r*e[0]+i*e[3]+s*e[6],n[1]=r*e[1]+i*e[4]+s*e[7],n[2]=r*e[2]+i*e[5]+s*e[8],n},r.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.equal=function(e,t){return e===t||Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<n&&Math.abs(e[2]-t[2])<n&&Math.abs(e[3]-t[3])<n&&Math.abs(e[4]-t[4])<n&&Math.abs(e[5]-t[5])<n&&Math.abs(e[6]-t[6])<n&&Math.abs(e[7]-t[7])<n&&Math.abs(e[8]-t[8])<n},r.identity=function(e){return e||(e=r.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.transpose=function(e,t){if(!t||e===t){var n=e[1],r=e[2],i=e[5];return e[1]=e[3],e[2]=e[6],e[3]=n,e[5]=e[7],e[6]=r,e[7]=i,e}return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},r.toMat4=function(t,n){return n||(n=e.createFloatArray(16)),n[15]=1,n[14]=0,n[13]=0,n[12]=0,n[11]=0,n[10]=t[8],n[9]=t[7],n[8]=t[6],n[7]=0,n[6]=t[5],n[5]=t[4],n[4]=t[3],n[3]=0,n[2]=t[2],n[1]=t[1],n[0]=t[0],n},r.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+"]"},r.translate=function(e,t,n){var r=t[0],i=t[1],s,o,u,a,f,l;return!n||e===n?(e[6]=e[0]*r+e[3]*i+e[6],e[7]=e[1]*r+e[4]*i+e[7],e[8]=e[2]*r+e[5]*i+e[8],e):(s=e[0],o=e[3],u=e[6],a=e[1],f=e[4],l=e[7],n[0]=s,n[3]=o,n[6]=u,n[1]=a,n[4]=f,n[7]=l,n[6]=s*r+a*i+e[6],n[7]=o*r+f*i+e[7],n[8]=u*r+l*i+e[8],n)},r.scale=function(e,t,n){var r=t[0],i=t[1];return!n||e===n?(e[0]*=r,e[1]*=r,e[2]*=r,e[3]*=i,e[4]*=i,e[5]*=i,e):(n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6],n[7]=e[7],n[8]=e[8],n)},r.rotate=function(e,t,n){n||(n=e);var r=Math.sin(-t),i=Math.cos(-t),s=e[0],o=e[1],u=e[2],a=e[3],f=e[4],l=e[5];return n[0]=s*i+a*r,n[1]=o*i+f*r,n[2]=u*i+l*r,n[3]=s*-r+a*i,n[4]=o*-r+f*i,n[5]=u*-r+l*i,n},r.ortho=function(e,t,n,i,s){s||(s=r.create());var o=t-e,u=i-n;return s[0]=2/o,s[1]=0,s[2]=0,s[3]=0,s[4]=2/u,s[5]=0,s[6]=-(e+t)/o,s[7]=-(i+n)/u,s[8]=1,s},r}),define("UPOGxICBwHHAJnhEO0kYe4CbSZksrC7moXiy6Wgb0MM=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t=e.createFloatArray,n=1e-6,r={};return r.create=function(e){var n=t(4);return e?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):n[0]=n[1]=n[2]=n[3]=0,n},r.createFrom=function(e,n,r,i){var s=t(4);return s[0]=e,s[1]=n,s[2]=r,s[3]=i,s},r.set=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.equal=function(e,t){return e===t||Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<n&&Math.abs(e[2]-t[2])<n&&Math.abs(e[3]-t[3])<n},r.identity=function(e){return e||(e=r.create()),e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},r.transpose=function(e,t){if(!t||e===t){var n=e[1];return e[1]=e[2],e[2]=n,e}return t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t},r.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},r.inverse=function(e,t){t||(t=e);var n=e[0],r=e[1],i=e[2],s=e[3],o=n*s-i*r;return o?(o=1/o,t[0]=s*o,t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t):null},r.multiply=function(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=e[3];return n[0]=r*t[0]+i*t[2],n[1]=r*t[1]+i*t[3],n[2]=s*t[0]+o*t[2],n[3]=s*t[1]+o*t[3],n},r.rotate=function(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=e[3],u=Math.sin(t),a=Math.cos(t);return n[0]=r*a+i*u,n[1]=r*-u+i*a,n[2]=s*a+o*u,n[3]=s*-u+o*a,n},r.multiplyVec2=function(e,t,n){n||(n=t);var r=t[0],i=t[1];return n[0]=r*e[0]+i*e[1],n[1]=r*e[2]+i*e[3],n},r.scale=function(e,t,n){n||(n=e);var r=e[0],i=e[1],s=e[2],o=e[3],u=t[0],a=t[1];return n[0]=r*u,n[1]=i*a,n[2]=s*u,n[3]=o*a,n},r.str=function(e){return"["+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+"]"},r}),define("31xs7IP9/9HMl0FlArPRi/p/6e1y56BYxsmywdBgw2Y=",["J19VukA9OHTe67LZyXj0g0dFAjqaCGG1/kxNYjbMFWo="],function(e){"use strict";return e}),define("5PzMHzmzLlRTZGIhjiVjeSMbVHNF6UMqkFfFTToVsn0=",function(){"use strict";return function(e){var t={"spelled.debug.drawCoordinateGrid":function(t){e.configurationManager.drawCoordinateGrid=!!t}};return function(e){var n=t[e.type];if(!n)return;n(e.payload)}}}),define("39gFs/6MB0ozYMGq2AC/r1nziKIaUeLJSZaG9oJ55h8=",["wspZzshkZyWF8MhE/MwHByCOFh6eOue2ZqHunVz8+I8="],function(e){"use strict";return e}),define("x81J/Fr9o8YgVYUYkA4GBLPAGmW4ok/0zW45f+sTXe4=",["39gFs/6MB0ozYMGq2AC/r1nziKIaUeLJSZaG9oJ55h8="],function(e){"use strict";var t=0,n=1,r=2,i=3,s=4,o=["DEBUG","INFO","WARN","ERROR","SILENT"],u=function(e){if(e<0||e>4)throw"Log level "+e+" is not supported."},a=function(){var e=new Date;return"["+e.toDateString()+" "+e.toLocaleTimeString()+"]"},f=function(e,t){return o[e]+" - "+t},l=function(e){u(e),this.currentLogLevel=e||n,this.sendMessageToEditor=undefined};return l.prototype={LOG_LEVEL_DEBUG:t,LOG_LEVEL_INFO:n,LOG_LEVEL_WARN:r,LOG_LEVEL_ERROR:i,LOG_LEVEL_SILENT:s,setSendMessageToEditor:function(e){this.sendMessageToEditor=e},setLogLevel:function(e){u(e),this.currentLogLevel=e},log:function(t,n){u(t);if(t<this.currentLogLevel)return;this.sendMessageToEditor&&this.sendMessageToEditor("spell.debug.consoleMessage",{level:o[t],text:n}),e(a()+" "+f(t,n))},debug:function(e){this.log(t,e)},info:function(e){this.log(n,e)},warn:function(e){this.log(r,e)},error:function(e){this.log(i,e)}},l}),define("SPE54dzwJvIC83XFQg0w6CJd1c3i4ArScQeR8p9us2A=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=512,n=function(e){var t=[];while(e>0)t.push(0),e--;return t},r=function(e,r,i){return{values:n(t),name:r,unit:i}},i=function(){this.series={}};return i.prototype={init:function(){this.addSeries("fps","frames per second","fps"),this.addSeries("totalTimeSpent","total time spent","ms"),this.addSeries("timeSpentRendering","time spent rendering","ms")},startTick:function(){e.each(this.series,function(e){e.values.push(0),e.values.shift()})},addSeries:function(t,n,i){if(!t)return;if(e.has(this.series,t))throw'Series with id "'+t+'" already exists';this.series[t]=r(t,n,i)},updateSeries:function(e,n){if(!e)return;var r=this.series[e];if(!r)return;r.values[t-1]+=n},getValues:function(){return this.series},getSeriesValues:function(e){return this.series[e]}},i}),define("Y7lXNEH6MYuxKZcj0hEw7mk9FYNXhoqyO9jGbZAP/xw=",["6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=0,i=1,s=2,o="output/resources",u={png:e.createImageLoader,jpg:e.createImageLoader,json:e.createSoundLoader,txt:e.createTextLoader},a=function(e,t){return{name:e,state:r,resources:t,resourcesTotal:t.length,resourcesNotCompleted:t.length}},f=function(e,t){return n.has(e,t)},l=function(e,t){return n.has(e,t)},c=function(e){e.resourcesNotCompleted-=1;var n=1-e.resourcesNotCompleted/e.resourcesTotal;this.eventManager.publish([t.RESOURCE_PROGRESS,e.name],[n]),e.resourcesNotCompleted===0&&(e.state=s,this.eventManager.publish([t.RESOURCE_LOADING_COMPLETED,e.name]))},h=function(e,t){n.each(e,n.bind(function(e,r){if(!n.has(this.resources,r))return;throw'Error: sub-resource "'+r+'" from resource "'+t+'" already exists.'},this))},p=function(e,t,r){if(r===undefined||n.size(r)===0)throw'Resource "'+t+'" from resource bundle "'+e+'" is undefined or empty on loading completed.';h.call(this,r,t),n.extend(this.resources,r),c.call(this,this.resourceBundles[e])},d=function(e,t,n){e.debug('Loading "'+n+'" failed with a timeout. In case the execution environment is safari this message can be ignored.'),c.call(this,this.resourceBundles[t])},v=function(e,t,r,i,s,a,f,l,c){var h=n.last(s.split(".")),p=u[h];if(p===undefined)throw'Could not create loader factory for resource "'+s+'".';var d=r+"/"+e+"/"+o,v=p(t,d,i,s,a,f,h==="json"?l:h==="jpg"||h==="png"?c:undefined);return v},m=function(e,t){n.each(t.resources,n.bind(function(r){if(l(this.resources,r)){c.call(this,t);return}var i=v(this.applicationId,this.eventManager,this.host,t.name,r,n.bind(p,this,t.name,r),n.bind(d,this,e,t.name,r),this.soundManager,this.renderingContext);if(i===undefined)throw'Could not create a loader for resource "'+r+'".';i.start()},this))},g=function(e,t,n,r,i,s){if(i===undefined)throw'Argument "eventManager" is undefined.';if(n===undefined)throw'Argument "soundManager" is undefined.';this.soundManager=n,this.renderingContext=r,this.eventManager=i,this.resourceBundles={},this.resources={},this.host=s.type==="internal"?"":"http://"+s.host,this.applicationId=t,this.logger=e.logger};return g.prototype={addResourceBundle:function(e,t){if(n.size(t)===0)throw'Resource group with name "'+e+'" has zero assigned resources.';if(f(this.resourceBundles,e))throw'Resource group with name "'+e+'" already exists.';this.resourceBundles[e]=a(e,t)},start:function(){var e=this.logger;n.each(this.resourceBundles,n.bind(function(t){if(t.state!==r)return;t.state=i,m.call(this,e,t)},this))},getResources:function(){return this.resources}},g}),define("8iy3tadpYAcycdlOrGT1fG72hFxCVZncbSaw/640iFE=",function(){"use strict";var e=function(e,t,n){return e<t?t:e>n?n:e},t=function(e,t,n){return e>=t&&e<=n};return{clamp:e,isInInterval:t}}),define("Njtu1p/lIocQu9jigRUr61eNAmO/ZIR7GBcFv6RVQkk=",function(){return{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"caps lock":20,escape:27,space:32,"page up":33,"page down":34,end:35,home:36,"left arrow":37,"up arrow":38,"right arrow":39,"down arrow":40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"left window key":91,"right window key":92,"select key":93,"numpad 0":96,"numpad 1":97,"numpad 2":98,"numpad 3":99,"numpad 4":100,"numpad 5":101,"numpad 6":102,"numpad 7":103,"numpad 8":104,"numpad 9":105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"num lock":144,"scroll lock":145,"semi-colon":186,"equal sign":187,comma:188,dash:189,period:190,"forward slash":191,"grave accent":192,"open bracket":219,"back slash":220,"close bracket":221,"single quote":222}}),define("fsErbfA5F8axhj3zph6UsZvTVGjNVaMXPDffB1nrpSw=",["Njtu1p/lIocQu9jigRUr61eNAmO/ZIR7GBcFv6RVQkk=","8iy3tadpYAcycdlOrGT1fG72hFxCVZncbSaw/640iFE=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r){"use strict";var i={xSize:1024,ySize:768},s=0,o=[],u=function(e){e.position[0]*=i.xSize,e.position[1]*=i.ySize;var t={type:e.type,sequenceNumber:s++,position:e.position};o.push(t)},a=function(e){e.position[0]*=i.xSize,e.position[1]*=i.ySize;var t={type:e.type==="touchstart"?"mousedown":"mouseup",sequenceNumber:s++,position:e.position};o.push(t)},f=function(e){o.push(l(e.type,e.keyCode))},l=function(e,t){return{type:e,keyCode:t,sequenceNumber:s++}},c=function(e){this.nativeInput=n.createInput(e)};return c.prototype={init:function(){n.features.touch&&(this.nativeInput.setInputEventListener("touchstart",a),this.nativeInput.setInputEventListener("touchend",a)),this.nativeInput.setInputEventListener("mousedown",u),this.nativeInput.setInputEventListener("mouseup",u),this.nativeInput.setInputEventListener("keydown",f),this.nativeInput.setInputEventListener("keyup",f)},cleanUp:function(){n.features.touch&&(this.nativeInput.removeInputEventListener("touchstart"),this.nativeInput.removeInputEventListener("touchend")),this.nativeInput.removeInputEventListener("mousedown"),this.nativeInput.removeInputEventListener("mouseup"),this.nativeInput.removeInputEventListener("keydown"),this.nativeInput.removeInputEventListener("keyup")},getInputEvents:function(){return o},injectKeyEvent:function(e,t){o.push(l(e,t))}},c}),define("WPNtx3AJAT8TMLQRYAWVM7uDsrZOGvJ/bA8ZcOHpEIU=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";function t(){return{subNodes:{},elements:[]}}function n(t){return t?e.reduce(t.subNodes,function(e,t){return e.concat(n(t))},t.elements):[]}function r(t,n,r){return e.reduce(n,function(e,t){return e===undefined?undefined:(r!==undefined&&r(e,t),e.subNodes[t])},t)}return{create:function(){return t()},add:function(e,n,i){var s=r(e,n,function(e,n){e.subNodes.hasOwnProperty(n)||(e.subNodes[n]=t())});s.elements.push(i)},remove:function(t,n,i){var s=r(t,n);s.elements=e.filter(s.elements,function(e){return e!==i})},get:function(e,t){return n(r(e,t))}}}),define("Axtl2xq/K+cIrUJl1WsyYz8evRZE+xzxLYxwRyNODnE=",["WPNtx3AJAT8TMLQRYAWVM7uDsrZOGvJ/bA8ZcOHpEIU=","cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";function o(){this.subscribers=e.create()}var r=function(e){return n.isArray(e)?e:[e]},i=!1,s=function(e,t){var r=t.callback,i=n.after(t.events.length,function(){r()});n.each(t.events,function(t){e.subscribe(t,i)})};return o.prototype={subscribe:function(n,i){n=r(n),e.add(this.subscribers,n,i),this.publish(t.SUBSCRIBE,[n,i])},unsubscribe:function(n,i){n=r(n),e.remove(this.subscribers,n,i),this.publish(t.UNSUBSCRIBE,[n,i])},publish:function(t,i){t=r(t);var s=e.get(this.subscribers,t);return n.each(s,function(e){e.apply(undefined,i)}),!0},waitFor:function(e){return i={events:[e]},this},and:function(e){if(!i)throw'A call to the method "and" must be chained to a previous call to "waitFor".';return i.events.push(e),this},resume:function(e){if(!i)throw'A call to the method "resume" must be chained to a previous call to "waitFor" or "and".';i.callback=e,s(this,i),i=!1}},o}),define("tswFoFP1qW80Y5vCmuWdk4Zz1BlzAFxUZobmrgs+Dc4=",["6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=function(t,r){if(n.indexOf(t,"*")===-1)return!1;var i=r==="internal"?e.getHost():r,s=r==="internal"?"internal":"external";return{host:i,type:s}},i=function(e,t){if(n.indexOf(e,t)===-1)return!1;var r=t.split("x");return[parseInt(r[0]),parseInt(r[1])]},s=function(e,t){return n.contains(e,t)&&t},o={drawCoordinateGrid:{validValues:[!0,!1],configurable:!0,extractor:s},screenSize:{validValues:["640x480","800x600","1024x768"],configurable:!1,extractor:i},gameServer:{validValues:["internal","*"],configurable:!0,extractor:r},resourceServer:{validValues:["internal","*"],configurable:!0,extractor:r},id:{configurable:!0}},u={drawCoordinateGrid:!1,screenSize:"1024x768",gameServer:"internal",resourceServer:"internal",id:"spell"},a=function(t,r,i){r||(r={}),i||(i={}),n.defaults(r,e.configurationOptions.defaultOptions),n.defaults(i,e.configurationOptions.validOptions);var s=t;s=n.reduce(s,function(e,t,n){var r=i[n];return r&&!!r.configurable&&(e[n]=t),e},{}),n.defaults(s,r);var o=n.reduce(s,function(e,t,n){var s=i[n],o=!1;return s.extractor?o=s.extractor(s.validValues,t):o=t,o!==!1?e[n]=o:e[n]=s.extractor(s.validValues,r[n]),e},{});return o.platform=e.getPlatformInfo(),o},f=function(e,r){n.extend(this,a(r,u,o)),e.subscribe([t.SCREEN_RESIZED],n.bind(function(e,t){this.screenSize.width=e,this.screenSize.height=t},this))};return f}),define("D0VnVxnEsMeOUbsbhKgGAHodapuSclMthGlQ6q4qy6E=",function(){"use strict";return{ENTITY:"entityTemplate",COMPONENT:"componentTemplate",SYSTEM:"systemTemplate"}}),define("VARx5D0ga68cy8NlL0048TNzV6HQOz8e4ZC9Q2rlpD4=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function t(n){var r=e.isArray(n);if(r||e.isObject(n)){var i=r?[]:{};return e.each(n,function(e,n){i[n]=t(e)}),i}return n}}),define("3b1lCBX97WXzbd9D+G1OdTnsRdBlXL/yTO6znxHCs8M=",["VARx5D0ga68cy8NlL0048TNzV6HQOz8e4ZC9Q2rlpD4=","D0VnVxnEsMeOUbsbhKgGAHodapuSclMthGlQ6q4qy6E=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";function m(){this.templates={},this.entityPrototypes={}}var r=function(){return n.reduce(arguments,function(e,t){return t===""?e:e+(e!==""?".":"")+t},"")},i=function(e){var t=n.reduce(e.attributes,function(e,t){var r=t.name;return e[r]=n.has(e,r)?e[r]+=1:1,e},{});return!n.any(t,function(e){return e>1})},s=function(e){var t=n.reduce(e.components,function(e,t){var r=t.templateId;return e[r]=n.has(e,r)?e[r]+=1:1,e},{});return n.each(t,function(t,n){if(t>1)throw"Error: Entity template '"+e.templateId+"' has duplicate component of type '"+n+"'."}),!0},o=function(e){var r=e.type;return n.contains(t,r)?r===t.COMPONENT?i(e):r===t.ENTITY?s(e):!0:!1},u=function(e,t){throw"Error: Could not find a template with id '"+e+(t?"' of type "+t:"")+"."},a=function(e,t){return t?n.clone(e.attributes[0]["default"]):n.reduce(e.attributes,function(e,t){return e[t.name]=n.clone(t["default"]),e},{})},f=function(e,t,r){return t===undefined?e:r?n.clone(t):n.extend(e,t)},l=function(e,r){return n.reduce(r.components,function(n,r){var i=r.templateId,s=h(e,i,t.COMPONENT);s||u(i,t.COMPONENT);var o=p(s.attributes);return n[i]=f(a(s,o),r.config,o),n},{})},c=function(e,i,s){var o=r(s.namespace,s.name);if(n.has(e,o))throw"Error: Template definition '"+o+"' already exists.";e[o]=s,s.type===t.ENTITY&&(i[o]=l(e,s))},h=function(e,t,n){var r=e[t];return r?n?r.type!==n?!1:r:r:!1},p=function(e){if(e===undefined)throw"Error: 'attributes' is of type falsy.";return n.isObject(e)&&n.size(e)===1&&e[0].name==="value"},d=function(e,r,i,s){return n.reduce(s,function(n,i,s){var o=h(e,s,t.COMPONENT);if(!o)throw"Error: Could not find component template '"+s+"' for '"+r+"'.";return n[s]=f(n[s]||{},i,p(o.attributes)),n},i)},v=function(e,r){return n.reduce(r,function(n,r,i){var s=h(e,i,t.COMPONENT),o=p(s.attributes);return n[i]=f(a(s,o),r,o),n},{})};return m.prototype={add:function(e){if(!e.type||!o(e))throw"Error: The format of the supplied template definition is invalid.";c(this.templates,this.entityPrototypes,e)},createComponents:function(t,n){if(t){var r=this.entityPrototypes[t];if(!r)throw"Error: Could not find entity prototype for template id '"+t+"'.";return d(this.templates,t,e(r),n)}return v(this.templates,n)},hasTemplate:function(e){return!!h(this.templates,e)},getTemplate:function(e){return h(this.templates,e)},getTemplateIds:function(e){if(!n.contains(t,e))throw"Error: Template type '"+e+"' is not supported.";return n.reduce(this.templates,function(t,n,r){return n.type===e?t.concat(r):t},[])},isSingleAttributeComponent:function(e){var n=h(this.templates,e,t.COMPONENT);if(!n)throw"Error: Could not find component template with id '"+e+"'.";return p(n.attributes)}},m}),define("74xYGmiCEuGqsnJn0w3XuNJ8Jik3BPqz4FwmVPdLPF0=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(n){return e.reduce(n,function(n,r){return n.push(r),e.has(r,"children")?n.concat(t(r.children)):n},[])};return function(n){var r=e.isArray(n)?n:[n];return t(r)}}),define("h2aMiZCagVvEo7aSt+UFK1OYzb19iS+Je86Iito/sUs=",["TpUPENVsbpktS1yxz8LZH4ftV7yQhfNp9dpn/zLcys4=","74xYGmiCEuGqsnJn0w3XuNJ8Jik3BPqz4FwmVPdLPF0=","cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r){"use strict";var i="spell.entity.2d.graphics.camera",s="spell.component.2d.graphics.camera",o=function(e){if(!e)throw"Error: No script id provided.";var t=require(e);if(!t)throw"Error: Could not resolve script id '"+e+"' to module.";return t},u=function(e,t,n){r.each(e,function(e){e.prototype[t].apply(e,n)})},a=function(t,n,i,s){var u=n.getTemplate(s),a=o(u.scriptId),f=r.reduce(u.input,function(e,t){return e[t.name]=i.getComponentsById(t.templateId),e},{});return e(a,[t],f)},f=function(e,t){var n=e.templateManager,i=e.entityManager;return r.map(t,function(t){return a(e,n,i,t)})},l=function(e){return r.any(t(e.entities),function(e){if(e.templateId!==i||!e.config)return!1;var t=e.config[s];return t?t.active:!1})},c=function(e){var t={};t[s]={active:!0},e.createEntity({templateId:i,config:t})},h=function(e){this.globals=e,this.templateManager=e.templateManager,this.renderSystems=null,this.updateSystems=null,this.script=null};return h.prototype={render:function(e,t){u(this.renderSystems,"process",[this.globals,e,t])},update:function(e,t){u(this.updateSystems,"process",[this.globals,e,t])},init:function(e,t){var n=e.entityManager;l(t)||c(n),t.scriptId&&(this.script=o(t.scriptId),this.script.init(this.globals,n,t)),t.systems&&(this.renderSystems=f(e,t.systems.render),this.updateSystems=f(e,t.systems.update),u(this.renderSystems,"init",[this.globals,t]),u(this.updateSystems,"init",[this.globals,t]))},destroy:function(e,t){u(this.renderSystems,"cleanUp",[this.globals,t]),u(this.updateSystems,"cleanUp",[this.globals,t]),this.script.cleanUp(this.globals)}},h}),define("boS9hp6s3d21xTt1ZSKEqEgMNZTwMdDGYbpxywj7aos=",["cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","h2aMiZCagVvEo7aSt+UFK1OYzb19iS+Je86Iito/sUs=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=function(e,t){this.globals=e,this.mainLoop=t};return r.prototype={startScene:function(e){var r=new t(this.globals);r.init(this.globals,e),this.mainLoop.setRenderCallback(n.bind(r.render,r)),this.mainLoop.setUpdateCallback(n.bind(r.update,r))}},r}),define("TpUPENVsbpktS1yxz8LZH4ftV7yQhfNp9dpn/zLcys4=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t="The first argument for create must be a constructor. You passed in ";return function(n,r,i){if(n.prototype===undefined)throw t+n;var s={};!!i&&e.isObject(i)&&e.extend(s,i),s.prototype=n.prototype;var o=n.apply(s,r);return o||s}}),define("sU6xUwnG/sY0Ri2yJ2B+4ndKNWR+XDUFBvypNmpRmmg=",["TpUPENVsbpktS1yxz8LZH4ftV7yQhfNp9dpn/zLcys4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=0,r="spell.component.entityComposite.root",i="spell.component.entityComposite.children",s=function(){return n++},o=function(e){return t.reduce(e,function(e,t){return e[t]={},e},{})},u=function(e,n,r){t.each(r,function(t,r){e[r][n]=t})},a=function(e,n,r){r?delete e[r][n]:t.each(e,function(e){if(!t.has(e,n))return;delete e[n]})},f=function(e){var n,r,i;if(!e)return;if(t.isString(e))n=e;else if(t.isObject(e)){var s=t.has(e,"templateId"),o=t.has(e,"config");s&&(n=e.templateId),r=o?e.config:{},t.has(e,"children")&&(i=e.children)}return{templateId:n,config:r,children:i}},l=function(e){var n,r;if(!e)return;if(t.isString(e))n=e,r={};else if(t.isObject(e)){if(!t.has(e,"templateId"))throw"Error: Supplied invalid arguments.";n=e.templateId,r=e.config||{}}var i={};return i[n]=r,i},c=function(e,n){var s={};return e&&(s[r]={}),t.size(n)>0&&(s[i]={ids:n}),s},h=function(e,n,r,i){i=i===!0||i===undefined,r=f(r);if(!r)throw"Error: Supplied invalid arguments.";var o=r.templateId,a=r.config||{};if(!o&&!a)throw"Error: Supplied invalid arguments.";if(o&&!n.hasTemplate(o))throw"Error: Unknown template '"+o+"'. Could not create entity.";var l=t.map(r.children,function(t){return h(e,n,t,!1)});t.extend(a,c(i,l));var p=s();return u(e,p,n.createComponents(o,a||{})),p},p=function(e){this.templateManager=e,this.components=o(e.getTemplateIds("componentTemplate"))};return p.prototype={createEntity:function(e){return h(this.components,this.templateManager,e)},removeEntity:function(e){if(!e)throw"Error: Missing entity id.";a(this.components,e)},createEntities:function(e){var n=this;t.each(e,function(e){n.createEntity(e)})},addComponent:function(e,t){if(!e)throw"Error: Missing entity id.";u(this.components,e,this.templateManager.createComponents(null,l(t)))},removeComponent:function(e,t){if(!e)throw"Error: Missing entity id.";a(this.components,e,t)},hasComponent:function(e,t){var n=this.components[t];return n?!!n[e]:!1},getComponentsById:function(e){var t=this.components[e];if(!t)throw"Error: No component list for component template id '"+e+"' available.";return t}},p}),define("6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=",["HFDYWVgRyrhHY2KATklGRkPckqV4jVAACe4xWOlbLYY=","nWNLlTtXESn8SqZ6GddNabDOUjB4LefSiI+9XEsZYmg=","oPrVLhLd2PnCCRpZTwli6aNbVm+aNLAC1sJnbS6xVn8=","ZqMBNTMEUCEjI/OVW91RvnSXrbNud0ZRKWRku/rX/Ds=","bT1dgc/3zs3/zhPuJg4Xiztl8XLm5Uc+D+Eqtkbsmd4=","QaD0f6fU2UVjItxoSDDWeB2ElIaLINNHevlJfzmoDBg=","XRz6ZY1jo28yLiT686aBwTBcr94D/v97NQM1Ti3dvCQ=","3ZSQGM1c2BAMKa3dbHQCHrSWm3fXxxnzR+a5MWv/xdg=","rEYqh2GBvinjduCyGsbv4n9mKgNnKE+azLg9e1q6fUw=","48m94EmhFTEiK3Vs+bmiOLG5GspCTCaNiwKL0ElgQh4=","nBRERbho9PXv7Yc7UKzlz9aYKuD6BeNrhTlfLlHck4o=","dBVCdOd2ydzpZ+4Sx8Q/uZzh/d0W0UPJ9KIqh5lHd9E=","vz6LNW/f84HzKVelQxQ0U1GQskLNo9fw2rM9kr9yejk=","GeuMFMe0O7rgFCNG/R2dZ2WXP+Bso0bsyxQwmtl5oMI=","3Aqf+iqp/2G0DDunSF6zIBGyURf6W2xzxQnfu9O8ajg="],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){"use strict";var v=function(){return t()},m=function(){return"html5"},g=function(e,t){return new l(e,t)},y=function(e){p.renderViewport(e)},b=function(){return new d};return{callNextFrame:e,registerTimer:s,createSocket:r,createSoundManager:b,RenderingFactory:i,getHost:v,configurationOptions:c,getPlatformInfo:m,getJsonCoder:n,createInput:g,features:h,registerOnScreenResize:y,createImageLoader:function(e,t,n,r,i,s,u){return f(o,e,t,n,r,i,s,u)},createSoundLoader:function(e,t,n,r,i,s,o){return f(u,e,t,n,r,i,s,o)},createTextLoader:function(e,t,n,r,i,s){return f(a,e,t,n,r,i,s)}}}),define("Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=",["9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=","bhFTyHY/SK+ra0lq9WrEQIziwTZLTUIDKmU4+KNSorU=","bA23bDq8fPntmQU9GQoK9B4kAtIeuQjrthbYTL8lteQ=","ERfKxSThBJnmxC9i8rcWnwt6tD9dbVocsVJa9m/W/j8=","kPqicgHkZUNtccahT1HPrc/4aVLyUwv+cXaSLpXJHxo="],function(e,t,n,r,i){"use strict";return{createFloatArray:e,createIntegerArray:t,hasFloatArraySupport:n,hasIntegerArraySupport:r,Time:i}}),define("/V8x6jYt/KxKsfIudrdXKJHn0YsD2VYx5hYPCYv9N6g=",["cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";function r(r,i,s){this.newRemoteTime=s,this.remoteTime=s,this.newRemoteTimPending=!1,this.localTime=s,this.previousSystemTime=t.Time.getCurrentInMs(),this.elapsedTime=0,this.deltaLocalRemoteTime=0,this.statisticsManager=i,r.subscribe(["clockSyncUpdate"],n.bind(function(e){this.newRemoteTime=e,this.newRemoteTimPending=!0},this)),r.subscribe(e.CLOCK_SYNC_ESTABLISHED,n.bind(function(e){this.newRemoteTime=this.remoteTime=this.localTime=e,this.newRemoteTimPending=!1},this)),i.addSeries("remoteTime",""),i.addSeries("localTime",""),i.addSeries("deltaLocalRemoteTime",""),i.addSeries("relativeClockSkew",""),i.addSeries("newRemoteTimeTransfered","")}return r.prototype={update:function(){this.newRemoteTimPending&&(this.remoteTime=this.newRemoteTime,this.newRemoteTimPending=!1);var e=t.Time.getCurrentInMs();this.elapsedTime=Math.max(e-this.previousSystemTime,0),this.previousSystemTime=e,this.localTime+=this.elapsedTime,this.remoteTime+=this.elapsedTime,this.deltaLocalRemoteTime=this.localTime-this.remoteTime;var n=1e9;this.relativeClockSkew=(this.localTime/this.remoteTime*n-n)*2+1,this.statisticsManager.updateSeries("remoteTime",this.remoteTime%2e3),this.statisticsManager.updateSeries("localTime",this.localTime%2e3),this.statisticsManager.updateSeries("deltaLocalRemoteTime",this.deltaLocalRemoteTime+250),this.statisticsManager.updateSeries("relativeClockSkew",this.relativeClockSkew)},getLocalTime:function(){return this.localTime},getElapsedTime:function(){return this.elapsedTime},getRemoteTime:function(){return this.remoteTime}},r}),define("t4YVpmpTWzX1X5zYtdZb+Qx3f48PbPKIu/Z/0trq9ZE=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(t){return e.reduce(t,function(e,t){return e.result[t]=e.index++,e},{index:0,result:{}}).result}}),define("cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=",["t4YVpmpTWzX1X5zYtdZb+Qx3f48PbPKIu/Z/0trq9ZE="],function(e){"use strict";return e(["SERVER_CONNECTION_ESTABLISHED","MESSAGE_RECEIVED","CLOCK_SYNC_ESTABLISHED","SUBSCRIBE","UNSUBSCRIBE","RESOURCE_PROGRESS","RESOURCE_LOADING_COMPLETED","RESOURCE_ERROR","RENDER_UPDATE","LOGIC_UPDATE","CREATE_SCENE","DESTROY_SCENE","SCREEN_RESIZED"])}),define("7PhHlzIXiau/l87zhE3bIdhsPohgmy+yJQROuFXc0Uw=",["cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","/V8x6jYt/KxKsfIudrdXKJHn0YsD2VYx5hYPCYv9N6g=","Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i){"use strict";var s=20,o=20,u=function(e,r,i){this.updateIntervalInMs=i||o,this.renderCallback=null,this.updateCallback=null,this.accumulatedTimeInMs=0;var s=n.Time.getCurrentInMs();this.timer=new t(e,r,s)};return u.prototype={setRenderCallback:function(e){this.renderCallback=e},setUpdateCallback:function(e){this.updateCallback=e},callEveryFrame:function(e){var t=this.timer;t.update();var n=1,i=t.getLocalTime(),s=t.getElapsedTime(),o=this.accumulatedTimeInMs+s*n,u=this.updateIntervalInMs;if(this.updateCallback)while(o>u)o<=5*u&&this.updateCallback(i,u),o-=u,i+=u;this.renderCallback&&this.renderCallback(i,s),r.callNextFrame(this.callEveryFramePartial)},run:function(){this.callEveryFramePartial=i.bind(this.callEveryFrame,this),this.callEveryFramePartial(n.Time.getCurrentInMs())}},function(e,t,n){return new u(e,t,n)}}),define("sue5lkVBqzKvL6Fk30ca23hDErzVxAbUl2Dno2KmJ/s=",["PF35L31cTrPY3rM0h3RsHDbSwWkzDUR3A+sTdxOq1so="],function(e){return e}),define("wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk=",["sue5lkVBqzKvL6Fk30ca23hDErzVxAbUl2Dno2KmJ/s="],function(e){var t={};return t.isArray=e.isArray,t.isObject=e.isObject,t.size=e.size,t.toArray=e.toArray,t.each=e.each,t.map=e.map,t.last=e.last,t.filter=e.filter,t.has=e.has,t.any=e.any,t.find=e.find,t.times=e.times,t.extend=e.extend,t.all=e.all,t.range=e.range,t.reduce=e.reduce,t.bind=e.bind,t.reject=e.reject,t.clone=e.clone,t.defaults=e.defaults,t.indexOf=e.indexOf,t.isString=e.isString,t.isEmpty=e.isEmpty,t.keys=e.keys,t.isFunction=e.isFunction,t.contains=e.contains,t.invoke=e.invoke,t.flatten=e.flatten,t.pick=e.pick,t.union=e.union,t.difference=e.difference,t.values=e.values,t.unique=e.unique,t.initial=e.initial,t.pluck=e.pluck,t.zip=e.zip,t}),define("Ou3ghm+312QiIrQxs5IDdTUXzb8IRKoOAYzxNpj54h0=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(e){return e},n=function(e,t,n,r,i){return[i%n*e,Math.floor(i/n)*t]},r=function(t,r){var i=r.assetId,s=t[i];if(!s)throw"Error: Could not find asset with id '"+i+"'.";var o=s.config.frameWidth,u=s.config.frameHeight,a=Math.floor(s.config.textureWidth/o),f=Math.floor(s.config.textureHeight/u),l=e.size(r.config.frameIds),c=e.bind(n,null,o,u);return{type:r.type,resourceId:s.resourceId,frameDimensions:[o,u],frameDuration:r.config.duration/l,frameOffsets:e.map(r.config.frameIds,function(e){return c(a,f,e)}),numFrames:l,looped:r.config.looped}};return function(n){return e.reduce(n,function(e,n,i,s){return n.type==="appearance"?e[i]=t(n):n.type==="animation"?e[i]=r(s,n):e[i]=n,e},{})}}),define("spell/client/main",["spell/client/runtimeModule","Ou3ghm+312QiIrQxs5IDdTUXzb8IRKoOAYzxNpj54h0=","7PhHlzIXiau/l87zhE3bIdhsPohgmy+yJQROuFXc0Uw=","sU6xUwnG/sY0Ri2yJ2B+4ndKNWR+XDUFBvypNmpRmmg=","boS9hp6s3d21xTt1ZSKEqEgMNZTwMdDGYbpxywj7aos=","3b1lCBX97WXzbd9D+G1OdTnsRdBlXL/yTO6znxHCs8M=","tswFoFP1qW80Y5vCmuWdk4Zz1BlzAFxUZobmrgs+Dc4=","Axtl2xq/K+cIrUJl1WsyYz8evRZE+xzxLYxwRyNODnE=","fsErbfA5F8axhj3zph6UsZvTVGjNVaMXPDffB1nrpSw=","Y7lXNEH6MYuxKZcj0hEw7mk9FYNXhoqyO9jGbZAP/xw=","SPE54dzwJvIC83XFQg0w6CJd1c3i4ArScQeR8p9us2A=","cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","x81J/Fr9o8YgVYUYkA4GBLPAGmW4ok/0zW45f+sTXe4=","5PzMHzmzLlRTZGIhjiVjeSMbVHNF6UMqkFfFTToVsn0=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","31xs7IP9/9HMl0FlArPRi/p/6e1y56BYxsmywdBgw2Y=","UPOGxICBwHHAJnhEO0kYe4CbSZksrC7moXiy6Wgb0MM=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","9h1VbSkUkR0rOE8ony/LEvlqT9hawoj6Npu6TdQx4pI=","KbAjopxCmgPWADMlHwI3LDG/9Q377Jy1ev50TVA7HtE=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=","UXTIupZGRczsgnUj2SpAlCuuFJw3p3TtznLNsAamIcQ=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N){"use strict";var C=function(e,t){T.each(t.componentTemplates,function(t){e.add(t)}),T.each(t.entityTemplates,function(t){e.add(t)}),T.each(t.systemTemplates,function(t){e.add(t)})},k=new h,L={logger:k},A=new u,O=new o(A,N),M=d.RenderingFactory.createContext2d(A,O.id,1024,768,O.renderingBackEnd),_=d.createSoundManager(),D=new a(O),P=new f(L,e.name,_,M,A,O.resourceServer),H=new l,B=new s,j=n(A,H),F=new i(L,j);H.init();var I=function(){N.debug&&(k.setLogLevel(k.LOG_LEVEL_DEBUG),v(k)),k.debug("client started"),C(B,e),T.extend(L,{assets:t(e.assets),configurationManager:O,templateManager:B,eventManager:A,entityManager:new r(B),inputManager:D,inputEvents:D.getInputEvents(),renderingContext:M,resourceLoader:P,resources:P.getResources(),statisticsManager:H,soundManager:_,sceneManager:F,runtimeModule:e});var n=M.getConfiguration();k.debug("created rendering context: type="+n.type+"; size="+n.width+"x"+n.height);var i=T.find(e.scenes,function(t){return t.name===e.startScene});if(!i)throw"Error: Could not find start scene '"+e.startScene+"'.";F.startScene(i),j.run()};return{start:I,setSendMessageToEditor:function(e){k.setSendMessageToEditor(e)},sendDebugMessage:p(L)}}),define("pxPktWbQv6JwiXBKpVjhVamtfw25l4zqvZIOftGIyVo=",function(){var e=typeof window!="undefined"&&!!navigator&&!!document;if(!e)return{};window.Modernizr=function(e,t,n){function r(e){p.cssText=e}function i(e,t){return r(m.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}var a="2.5.3",f={},l=t.documentElement,c="modernizr",h=t.createElement(c),p=h.style,d,v={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),g="Webkit Moz O ms",y=g.split(" "),b=g.toLowerCase().split(" "),w={},E={},S={},x=[],T=x.slice,N,C=function(e,n,r,i){var s,o,u,a=t.createElement("div"),f=t.body,h=f?f:t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:c+(r+1),a.appendChild(u);return s=["&#173;","<style>",e,"</style>"].join(""),a.id=c,h.innerHTML+=s,h.appendChild(a),f||(h.style.background="",l.appendChild(h)),o=n(a,e),f?a.parentNode.removeChild(a):h.parentNode.removeChild(h),!!o},k={}.hasOwnProperty,L;!s(k,"undefined")&&!s(k.call,"undefined")?L=function(e,t){return k.call(e,t)}:L=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=T.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(T.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(T.call(arguments)))};return r});var A=function(n,r){var i=n.join(""),s=r.length;C(i,function(n,r){var i=t.styleSheets[t.styleSheets.length-1],o=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"",u=n.childNodes,a={};while(s--)a[u[s].id]=u[s];f.touch="ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch||(a.touch&&a.touch.offsetTop)===9},s,r)}([,["@media (",m.join("touch-enabled),("),c,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);w.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},w.webgl=function(){try{var r=t.createElement("canvas"),i;i=!(!e.WebGLRenderingContext||!r.getContext("experimental-webgl")&&!r.getContext("webgl")),r=n}catch(s){i=!1}return i},w.touch=function(){return f.touch},w.websockets=function(){for(var t=-1,n=y.length;++t<n;)if(e[y[t]+"WebSocket"])return!0;return"WebSocket"in e},w.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n};for(var O in w)L(w,O)&&(N=O.toLowerCase(),f[N]=w[O](),x.push((f[N]?"":"no-")+N));return r(""),h=d=null,f._version=a,f._prefixes=m,f._domPrefixes=b,f._cssomPrefixes=y,f.testStyles=C,f}(this,this.document);var t=window.Modernizr;return t}),define("vz6LNW/f84HzKVelQxQ0U1GQskLNo9fw2rM9kr9yejk=",["pxPktWbQv6JwiXBKpVjhVamtfw25l4zqvZIOftGIyVo="],function(e){"use strict";return{touch:!!e.touch}}),define("3Aqf+iqp/2G0DDunSF6zIBGyURf6W2xzxQnfu9O8ajg=",["fuPh6ySl3Cb0v+qQ2/nJO9q0ukRvvSPzUFxF8iN7HZM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=8,r=undefined,i=!1,s=function(){return/iPhone|iPod|iPad/i.test(navigator.userAgent)?n=1:n=8,n},o="sounds",u={},a=function(e,r){var i=t.find(u,function(t){if(t.resource===e&&!t.playing&&!t.selected){if(n!==1)return!0;if(r)return!0}return!1});return!i||(i.selected=!0,i.playing=!1),i},f=function(e){e.stop=-1,e.start=-1,e.selected=!1,e.playing=!1},l={ogg:{mimeTypes:["audio/ogg; codecs=vorbis"]},mp3:{mimeTypes:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"]},wav:{mimeTypes:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"]}},c=function(){var e=new Audio;return t.reduce(l,function(n,r,i){if(!n){var s=t.find(r.mimeTypes,function(t){return e.canPlayType(t)});return s?i:null}return n},null)},h=function(e){var t=new Audio;return!e.onloadeddata||t.addEventListener("canplaythrough",e.onloadeddata,!1),t.addEventListener("error",function(){throw"Error: Could not load sound resource '"+t.src+"'"},!1),t.id=e.id,t.resource=e.resource,t.playing=!1,t.selected=!1,t.src=o+"/"+e.resource+"."+c(),t.autobuffer="auto",t.preload="auto",t.load(),t},p=function(e){var t=e.cloneNode(!0);return t.resource=e.resource,t.playing=!1,t.selected=!1,t},d=function(e){var t=new XMLHttpRequest;return t.open("GET",o+"/"+e.resource+"."+c(),!0),t.responseType="arraybuffer",!e.onloadeddata||(t.onload=function(){r.decodeAudioData(t.response,function(t){t.id=e.id,t.resource=e.resource,t.playing=!1,t.selected=!1,e.onloadeddata(t)})}),t.onError=function(){throw"Error: Could not load sound resource '"+e.resource+"'"},t.send(),t},v=function(){try{return r=new webkitAudioContext,!0}catch(e){return!1}},m=function(e){t.each(t.keys(u),function(t){v()?u[t].gain=e===!0?0:1:(u[t].muted=e,n===1&&(e===!0?u[t].pause():u[t].play()))})},g=function(e){i=!!e,m(i)},y=function(){return i},b=function(){v()?(this.createAudio=d,this.context=r):(this.createAudio=h,this.cloneAudio=p)};return b.prototype={soundSpriteConfig:undefined,audioFormats:l,channels:u,getFreeChannel:a,checkMaxAvailableChannels:s,maxAvailableChannels:n,remove:f,setMuted:g,isMuted:y},b}),define("wspZzshkZyWF8MhE/MwHByCOFh6eOue2ZqHunVz8+I8=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return e.bind(console.originalLog||console.log,console)}),define("fuPh6ySl3Cb0v+qQ2/nJO9q0ukRvvSPzUFxF8iN7HZM=",function(){"use strict";var e=function(e){this.soundId=e.soundId,this.volume=e.volume||1,this.muted=e.muted||!1,this.onComplete=e.onComplete||"",this.start=e.start||!1,this.stop=e.stop||!1,this.background=e.background||!1};return e.ON_COMPLETE_LOOP=1,e.ON_COMPLETE_REMOVE_COMPONENT=2,e.ON_COMPLETE_STOP=3,e}),define("o/Ta/cquRUJFl6rm4g8G3rJ6PhwZvlN4ZXDl2bhqRw0=",["fuPh6ySl3Cb0v+qQ2/nJO9q0ukRvvSPzUFxF8iN7HZM="],function(e){"use strict";var t=function(t,n){var r=function(){parseFloat(this.currentTime)>=parseFloat(this.stop)&&this.paused===!1&&(this.playing=!1,this.pause())},i=function(){this.playing===!1&&(this.playing=!0,this.currentTime=this.start,this.addEventListener("timeupdate",r,!1))},s=function(){this.playing===!1&&(this.removeEventListener("timeupdate",r,!1),this.play())},o=function(){this.removeEventListener("ended",o,!1),this.removeEventListener("timeupdate",r,!1),this.removeEventListener("pause",o,!1),this.removeEventListener("playing",i,!1),n.remove(this)};return{onComplete:e.ON_COMPLETE_STOP,start:t.start||0,stop:t.start+t.length||t.length,volume:1,background:!1,resource:t.resource,play:function(){var r=n.getFreeChannel(this.resource,this.isBackgroundSound());if(r===undefined)return;r.stop=r.duration<parseFloat(this.stop)?r.duration:parseFloat(this.stop),r.start=r.currentTime=parseFloat(this.start),r.volume=this.volume;if(!n.context)this.onComplete===e.ON_COMPLETE_LOOP?r.addEventListener("pause",s,!1):(this.onComplete===e.ON_COMPLETE_REMOVE_COMPONENT,r.addEventListener("pause",o,!1)),r.addEventListener("ended",o,!1),r.addEventListener("play",i,!1),r.play();else{var u=n.context.createGainNode(),a=n.context.createBufferSource();a.buffer=r,this.onComplete===e.ON_COMPLETE_LOOP?a.loop=!0:n.remove(r),a.connect(u),u.connect(n.context.destination),u.gain.value=this.volume,a.noteGrainOn(0,this.start,t.length)}},setVolume:function(e){this.volume=e||1},setLoop:function(){this.onComplete=e.ON_COMPLETE_LOOP},setOnCompleteRemove:function(){this.onComplete=e.ON_COMPLETE_REMOVE_COMPONENT},setStart:function(e){this.start=e},setStop:function(e){this.stop=e},setBackground:function(e){this.background=e===!1?!1:!0},isBackgroundSound:function(){return this.background}}};return t}),define("X99FMrrQOgXoV+y8AxIzOqvbGTqMg5DSmtgZ97GKsI8=",["o/Ta/cquRUJFl6rm4g8G3rJ6PhwZvlN4ZXDl2bhqRw0=","fuPh6ySl3Cb0v+qQ2/nJO9q0ukRvvSPzUFxF8iN7HZM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=function(t,r,i){var s={},o=0,u=0,a=t.checkMaxAvailableChannels(),f=a;t.soundSpriteConfig=r;var l=function(){return n.has(r.music,"index")===!0&&n.each(n.keys(r.music.index),function(i){s[i]=e(n.extend({resource:r.music.resource},r.music.index[i]),t)}),n.has(r.fx,"index")===!0&&n.each(n.keys(r.fx.index),function(i){s[i]=e(n.extend({resource:r.fx.resource},r.fx.index[i]),t)}),s},c=function(e){var s=function(){this.removeEventListener("canplaythrough",s,!1),u-=1;if(u===0)return i(l())},f=function(c){t.context?t.channels[e]=c:(this.removeEventListener("canplaythrough",f,!1),t.channels[e]=this),o-=1;if(o===0){if(n.has(r.fx,"resource")&&!t.context){var h=t.channels[r.fx.resource];for(var p=a;p>0;p--){u+=1;var d=t.cloneAudio(h);d.id=d.id+"_"+p,d.addEventListener("canplaythrough",s,!1),t.channels[d.id]=d}}u===0&&i(l())}};return o+=1,a-=1,t.createAudio({id:e,resource:e,onloadeddata:f})};if(n.has(r.music,"resource")){var h=c(r.music.resource);if(f===1){var p=function(){n.has(r.music,"resource")&&(o=1,h.load()),document.getElementById("game").style.display="block",document.getElementById("viewport").removeChild(this)};document.getElementById("game").style.display="none";var d=document.createElement("input");d.type="submit",d.onclick=p,d.value="On iPad/iPhone you have to click on this button to enable loading the sounds",document.getElementById("viewport").insertBefore(d,document.getElementById("game"))}}n.has(r.fx,"resource")&&c(r.fx.resource)};return r}),define("rEYqh2GBvinjduCyGsbv4n9mKgNnKE+azLg9e1q6fUw=",["cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(e){if(this.loaded===!0)return;this.loaded=!0;if(e.status!==200){r.call(this,e.response);return}this.onCompleteCallback(e.response)},r=function(t){this.eventManager.publish([e.RESOURCE_ERROR,this.resourceBundleName],[this.resourceBundleName,t])},i=function(e){if(e.readyState!==4)return;n.call(this,e)},s=function(e,t,n,r,i,s){this.eventManager=e,this.host=t,this.resourceBundleName=n,this.resourceUri=r,this.onCompleteCallback=i,this.loaded=!1};return s.prototype={start:function(){var e=this.host+"/"+this.resourceUri,s=new XMLHttpRequest;s.onload=t.bind(n,this,s),s.onreadystatechange=t.bind(i,this,s),s.onerror=t.bind(r,this),s.open("GET",e,!0),s.send(null)}},s}),define("3ZSQGM1c2BAMKa3dbHQCHrSWm3fXxxnzR+a5MWv/xdg=",["rEYqh2GBvinjduCyGsbv4n9mKgNnKE+azLg9e1q6fUw=","cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","X99FMrrQOgXoV+y8AxIzOqvbGTqMg5DSmtgZ97GKsI8=","QaD0f6fU2UVjItxoSDDWeB2ElIaLINNHevlJfzmoDBg=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i){"use strict";var s=function(e,t){if(!i.has(e,"type")||e.type!=="spriteConfig"||!i.has(e,"music")||!i.has(e,"fx"))throw"Not a valid sound sprite configuration.";var s=!1,o=5e3;r(i.bind(function(){if(s)return;this.onTimeOut(this.resourceBundleName,this.resourceUri)},this),o),n(this.soundManager,e,function(e){if(s)return;t(e),s=!0})},o=function(t,n){var r=new e(this.eventManager,this.host,this.resourceBundleName,t,function(e){var t=JSON.parse(e);if(t===undefined)throw"Parsing json string failed.";n(t)});r.start()},u=function(e,t,n,r,i,s,o){this.eventManager=e,this.soundManager=o,this.host=t,this.resourceBundleName=n,this.resourceUri=r,this.onCompleteCallback=i,this.onTimeOut=s};return u.prototype={start:function(){var e=i.last(this.resourceUri.split("/")),t=i.last(e.split("."));if(t==="json"){var n="sounds/output/"+e;o.call(this,n,i.bind(function(e){s.call(this,e,this.onCompleteCallback)},this))}}},u}),define("XRz6ZY1jo28yLiT686aBwTBcr94D/v97NQM1Ti3dvCQ=",["cbn6dRc62cpXaWM1yTuuxAat/alg9Vz0wr01jDOU0hY=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(e){if(this.loaded===!0)return;this.loaded=!0;var t={};t[this.resourceName]=this.renderingContext.createTexture(e),this.onCompleteCallback(t)},r=function(t){this.eventManager.publish([e.RESOURCE_ERROR,this.resourceBundleName],[this.resourceBundleName,t])},i=function(e){e.readyState==="complete"&&e.onload(e)},s=function(e,t,n,r,i,s,o){this.eventManager=e,this.renderingContext=o,this.resourceBundleName=n,this.resourcePath=t,this.resourceName=r,this.onCompleteCallback=i,this.loaded=!1};return s.prototype={start:function(){var e=new Image;e.onload=t.bind(n,this,e),e.onreadystatechange=t.bind(i,this,e),e.onerror=t.bind(r,this),e.src=this.resourcePath+"/"+this.resourceName}},s}),define("IkN6+YJ+tVtroMrc21U5X4xPesbZSx7cE6V/6aB9JXo=",function(){"use strict";return typeof window!="undefined"&&!!navigator&&!!document}),define("J19VukA9OHTe67LZyXj0g0dFAjqaCGG1/kxNYjbMFWo=",function(){"use strict";return function(e){console.originalLog=console.log,console.log=function(){e.error('Usage of console.log is prohibited within the SpellJS framework. You can use the built-in <a href="http://docs.spelljs.com/index.html#!/guide/tutorials_using_console_logging" target="_blank">logging functionality</a> instead.')},window&&(window.onerror=function(t,n,r){return e.error("'"+t+"' in "+n+":"+r),!0})}}),define("ijj+pqGQx6na7FmD3ThNnthDHbmRj1bv3dv7QgC+ZtU=",function(){var e=function(){throw"Creating a 2d flash renderer is not valid in this context"},t={createContext2d:e};return t}),define("GeuMFMe0O7rgFCNG/R2dZ2WXP+Bso0bsyxQwmtl5oMI=",function(){"use strict";var e={};return e.renderViewport=function(t){var n=function(e){var t=document.createElement("meta");return t.name="viewport",t.content="width=device-width; initial-scale="+e+"; maximum-scale="+e+"; user-scalable=0;",t},r=function(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,s=window.pageXOffset||r.scrollLeft||n.scrollLeft,o=r.clientTop||n.clientTop||0,u=r.clientLeft||n.clientLeft||0,a=t.top+i-o,f=t.left+s-u;return[Math.round(f),Math.round(a)]},i=function(){var e=r(document.getElementById("spell-canvas")),n=window.innerWidth-e[0],i=window.innerHeight-e[1];t(n,i)};navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)?document.getElementsByTagName("head")[0].appendChild(n("0.5")):navigator.userAgent.match(/iPad/i)&&document.getElementsByTagName("head")[0].appendChild(n("1.0")),e={forceDetection:!1,ACTIVE:"ontouchstart"in window||/webos/i.test(navigator.userAgent),READY:!1,isLandscape:function(){return window.orientation===90||window.orientation===-90},ready:function(e){window.addEventListener("viewportready",e,!1)}};if(!e.ACTIVE){window.onresize=i,i();return}var s=function(){var e=this;this.IS_ANDROID=/Android/.test(navigator.userAgent);var t=function(){e.prepareVisualViewport();var t=window.orientation;window.addEventListener("orientationchange",function(){window.orientation!=t&&(e.prepareVisualViewport(),t=window.orientation)},!1)};t()};s.prototype={getProfile:function(){if(e.forceDetection)return null;for(var t in e.profiles)if((new RegExp(t)).test(navigator.userAgent))return e.profiles[t];return null},postProcess:function(){e.READY=!0,this.triggerWindowEvent(this._firstUpdateExecuted?"viewportchange":"viewportready"),this._firstUpdateExecuted=!0,i()},prepareVisualViewport:function(){var t=this;if(navigator.standalone)return this.postProcess();document.documentElement.style.minHeight="5000px";var n=window.innerHeight,r=this.getProfile(),i=e.isLandscape()?"landscape":"portrait";window.scrollTo(0,t.IS_ANDROID?1:0);var s=this.IS_ANDROID&&!r?20:5,o=window.setInterval(function(){window.scrollTo(0,t.IS_ANDROID?1:0);if(t.IS_ANDROID?r?window.innerHeight===r[i]:--s<0:window.innerHeight>n||--s<0){clearInterval(o),document.documentElement.style.minHeight=window.innerHeight+"px";if(!document.getElementById("spell"))throw"Viewport element Missing";document.getElementById("spell").style.position="relative",document.getElementById("spell").style.height=window.innerHeight+"px",t.postProcess()}},10)},triggerWindowEvent:function(e){var t=document.createEvent("Event");t.initEvent(e,!1,!1),window.dispatchEvent(t)}},new s},e.profiles={MZ601:{portrait:696,landscape:1176},"GT-I9000|GT-I9100|Nexus S":{portrait:508,landscape:295},"GT-P1000":{portrait:657,landscape:400},"Desire_A8181|DesireHD_A9191":{portrait:533,landscape:320}},e}),define("ZqMBNTMEUCEjI/OVW91RvnSXrbNud0ZRKWRku/rX/Ds=",function(){"use strict";return function(e){var t=window.MozWebSocket||window.WebSocket,n=new t("ws://"+e+"/","socketrocket-0.1");return{send:function(e){n.send(e)},setOnMessage:function(e){n.onmessage=function(t){e(t.data)}},setOnConnected:function(e){n.onopen=function(t){e(t.data)}}}}}),define("48m94EmhFTEiK3Vs+bmiOLG5GspCTCaNiwKL0ElgQh4=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(e,t,n,r,i,s,o,u){if(e===undefined)throw"Argument 1 is missing.";if(t===undefined)throw"Argument 2 is missing.";if(n===undefined)throw"Argument 3 is missing.";if(r===undefined)throw"Argument 4 is missing.";if(i===undefined)throw"Argument 5 is missing.";if(s===undefined)throw"Argument 6 is missing.";if(o===undefined)throw"Argument 7 is missing.";return new e(t,n,r,i,s,o,u)}}),define("oPrVLhLd2PnCCRpZTwli6aNbVm+aNLAC1sJnbS6xVn8=",function(){"use strict";return function(){return{encode:_.bind(JSON.stringify,JSON),decode:_.bind(JSON.parse,JSON)}}}),define("nWNLlTtXESn8SqZ6GddNabDOUjB4LefSiI+9XEsZYmg=",function(){"use strict";return function(){return document.location.host}}),define("Pcc/biVPUnlHYey99hXN/gpvcMdumN7m5R8g2fh6f9Q=",function(){return function(e,t,n){var r=document.getElementById(e);if(!r)throw'Could not find a container with the id "spell" in the DOM tree.';var i=document.createElement("canvas");return i.id="spell-canvas",i.width=t,i.height=n,r.appendChild(i),i}}),define("ylYWHG4ZqarTkEWDhe57WvjShKgZjvD5PeHlyjvDF04=",function(){return{vertex:["attribute vec2 aVertexPosition;","uniform mat3 uScreenSpaceShimMatrix;","uniform mat3 uModelViewMatrix;","uniform mat3 uTextureMatrix;","varying vec2 vTextureCoord;","void main( void ) {","vTextureCoord = ( uTextureMatrix * vec3( aVertexPosition, 1.0 ) ).st;","gl_Position = vec4( uScreenSpaceShimMatrix * uModelViewMatrix * vec3( aVertexPosition, 1.0 ), 1.0 );","}"].join("\n"),fragment:["precision mediump float;","uniform sampler2D uTexture0;","uniform vec4 uGlobalColor;","uniform float uGlobalAlpha;","uniform bool uFillRect;","varying vec2 vTextureCoord;","void main( void ) {","if( !uFillRect ) {","	vec4 color = texture2D( uTexture0, vTextureCoord );","	gl_FragColor = color * vec4( 1.0, 1.0, 1.0, uGlobalAlpha );","} else {","	gl_FragColor = uGlobalColor * vec4( 1.0, 1.0, 1.0, uGlobalAlpha );","}","}"].join("\n")}}),define("N7A3kDX83iXVoMIuYfUpdj9KNKE5/GD+cgj2f2prdqo=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t,n=function(t){var n=null,r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i={alpha:!1};return e.find(r,function(e){return n=t.getContext(e,i),n!==null}),n};return n}),define("nUDcNlIdSATy78dLW44o5WS90njS6/U29KzWJbZcW7c=",["FVHd7ApTLsQfGrxEv0dRsRbKKSZlAf1dzrptE8P5d20=","N7A3kDX83iXVoMIuYfUpdj9KNKE5/GD+cgj2f2prdqo=","ylYWHG4ZqarTkEWDhe57WvjShKgZjvD5PeHlyjvDF04=","c3TtVd3rj7BPHOmetcKxDeLDfncpdkLzPceSVTUQEMY=","8iy3tadpYAcycdlOrGT1fG72hFxCVZncbSaw/640iFE=","9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=","a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks="],function(e,t,n,r,i,s,o,u){"use strict";var a,f=new e(32),l=f.getTop(),c=u.create(),h,p=u.create();u.identity(p);var d=u.create();u.identity(d);var v=u.create();u.identity(v);var m=u.create(),g=u.create(),y=function(e,t,n){return u.ortho(0,e,0,t,n),n},b=function(e,t,n){return u.identity(n),n[0]=e*.5,n[4]=t*.5,n[6]=e*.5,n[7]=t*.5,n},w=function(){z(0,0,a.canvas.width,a.canvas.height),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.disable(a.DEPTH_TEST),a.activeTexture(a.TEXTURE0),x()},E=function(){return w(),{clear:H,createTexture:X,drawTexture:B,drawSubTexture:j,fillRect:F,getConfiguration:W,resizeColorBuffer:I,restore:L,rotate:P,save:k,scale:_,setClearColor:M,setFillStyleColor:A,setGlobalAlpha:O,setTransform:R,setViewMatrix:U,transform:q,translate:D,viewport:z}},S=function(e){if(e===undefined)throw"Missing first argument.";return a!==undefined?a:(a=t(e),a===null?null:E())},x=function(){h=a.createProgram();var e=a.createShader(a.VERTEX_SHADER);a.shaderSource(e,n.vertex),a.compileShader(e),a.attachShader(h,e);var t=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(t,n.fragment),a.compileShader(t),a.attachShader(h,t),a.linkProgram(h),a.useProgram(h);var r=s(8);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=0,r[5]=1,r[6]=1,r[7]=1;var i=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,i),a.bufferData(a.ARRAY_BUFFER,r,a.STATIC_DRAW);var o=a.getAttribLocation(h,"aVertexPosition");a.vertexAttribPointer(o,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(o);var u=a.getUniformLocation(h,"uScreenSpaceShimMatrix");a.uniformMatrix3fv(u,!1,c),N(g)},T=!1,N=function(e){if(T)return;e[0]=1,e[4]=1,e[6]=0,e[7]=0,a.uniformMatrix3fv(a.getUniformLocation(h,"uTextureMatrix"),!1,e)},C=function(e,t,n,r,i){T=!1,i[0]=e,i[4]=t,i[6]=n,i[7]=r,a.uniformMatrix3fv(a.getUniformLocation(h,"uTextureMatrix"),!1,i)},k=function(){f.pushState(),l=f.getTop()},L=function(){f.popState(),l=f.getTop()},A=function(e){l.color=r.createRgba(e)},O=function(e){l.opacity=e},M=function(e){a.clearColor(e[0],e[1],e[2],1)},_=function(e){u.scale(l.matrix,e)},D=function(e){u.translate(l.matrix,e)},P=function(e){u.rotate(l.matrix,e)},H=function(){a.clear(a.COLOR_BUFFER_BIT)},B=function(e,t,n,r,i){if(e===undefined)throw"Texture is undefined";r||(r=1),i||(i=1);var s=a.getUniformLocation(h,"uFillRect");a.uniform1i(s,0),a.uniform1f(a.getUniformLocation(h,"uGlobalAlpha"),l.opacity),a.uniform4fv(a.getUniformLocation(h,"uGlobalColor"),l.color),a.bindTexture(a.TEXTURE_2D,e.privateGlTextureResource),s=a.getUniformLocation(h,"uTexture0"),a.uniform1i(s,0),u.multiply(v,l.matrix,m),u.translate(m,[t,n]),u.rotate(m,Math.PI),u.scale(m,[-r,i]),u.translate(m,[0,-1]),a.uniformMatrix3fv(a.getUniformLocation(h,"uModelViewMatrix"),!1,m),N(g),a.drawArrays(a.TRIANGLE_STRIP,0,4)},j=function(e,t,n,r,i,s,o,f,c){if(e===undefined)throw"Texture is undefined";f||(f=1),c||(c=1);var p=a.getUniformLocation(h,"uFillRect");a.uniform1i(p,0),a.uniform1f(a.getUniformLocation(h,"uGlobalAlpha"),l.opacity),a.uniform4fv(a.getUniformLocation(h,"uGlobalColor"),l.color),a.bindTexture(a.TEXTURE_2D,e.privateGlTextureResource),p=a.getUniformLocation(h,"uTexture0"),a.uniform1i(p,0),u.multiply(v,l.matrix,m),u.translate(m,[s,o]),u.rotate(m,Math.PI),u.scale(m,[-f,c]),u.translate(m,[0,-1]),a.uniformMatrix3fv(a.getUniformLocation(h,"uModelViewMatrix"),!1,m);var d=e.dimensions[0],y=e.dimensions[1];C(r/d,i/y,t/d,n/y,g),a.drawArrays(a.TRIANGLE_STRIP,0,4)},F=function(e,t,n,r){var i=a.getUniformLocation(h,"uFillRect");a.uniform1i(i,1),a.uniform1f(a.getUniformLocation(h,"uGlobalAlpha"),l.opacity),a.uniform4fv(a.getUniformLocation(h,"uGlobalColor"),l.color),u.multiply(v,l.matrix,m),u.translate(m,[e,t]),u.scale(m,[n,r]),a.uniformMatrix3fv(a.getUniformLocation(h,"uModelViewMatrix"),!1,m),a.drawArrays(a.TRIANGLE_STRIP,0,4)},I=function(e,t){a.canvas.width=e,a.canvas.height=t,b(e,t,p),u.multiply(p,d,v)},q=function(e){u.multiply(l.matrix,e)},R=function(e){u.set(e,l.matrix)},U=function(e){u.set(e,d),b(a.canvas.width,a.canvas.height,p),u.multiply(p,d,v)},z=function(e,t,n,r){a.viewport(e,t,n,r),y(n,r,c);var i=a.getUniformLocation(h,"uScreenSpaceShimMatrix");a.uniformMatrix3fv(i,!1,c)},W=function(){return{type:"webgl",width:a.canvas.width,height:a.canvas.height}},X=function(e){var t=a.createTexture();return a.bindTexture(a.TEXTURE_2D,t),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.generateMipmap(a.TEXTURE_2D),a.bindTexture(a.TEXTURE_2D,null),{dimensions:[e.width,e.height],privateGlTextureResource:t}};return S}),define("c3TtVd3rj7BPHOmetcKxDeLDfncpdkLzPceSVTUQEMY=",["8iy3tadpYAcycdlOrGT1fG72hFxCVZncbSaw/640iFE=","a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(t){return Math.round(e.clamp(t,0,1)*255)},r=function(e,t,n){return[e,t,n]},i=function(e){return e.length===4?[e[0],e[1],e[2],e[3]]:[e[0],e[1],e[2],1]},s=function(){var e=Math.round(Math.random()*3),n=t.create([.8,.8,.8]);for(var r=0;r<n.length;r++)r===e?n[r]=.95:n[r]*=Math.random();return n},o=function(e){return e.length===4?"rgba("+n(e[0])+", "+n(e[1])+", "+n(e[2])+", "+Math.max(0,Math.min(e[3],1))+")":"rgb("+n(e[0])+", "+n(e[1])+", "+n(e[2])+")"};return{createRgb:r,createRgba:i,createRandom:s,formatCanvas:o}}),define("ERfKxSThBJnmxC9i8rcWnwt6tD9dbVocsVJa9m/W/j8=",function(){"use strict";return function(){return typeof Int32Array!="undefined"}}),define("bhFTyHY/SK+ra0lq9WrEQIziwTZLTUIDKmU4+KNSorU=",["ERfKxSThBJnmxC9i8rcWnwt6tD9dbVocsVJa9m/W/j8="],function(e){"use strict";var t=e()?Int32Array:Array;return function(e){return new t(e)}}),define("bA23bDq8fPntmQU9GQoK9B4kAtIeuQjrthbYTL8lteQ=",function(){"use strict";return function(){return typeof Float32Array!="undefined"}}),define("9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=",["bA23bDq8fPntmQU9GQoK9B4kAtIeuQjrthbYTL8lteQ="],function(e){"use strict";var t=e()?Float32Array:Array;return function(e){return new t(e)}}),define("FVHd7ApTLsQfGrxEv0dRsRbKKSZlAf1dzrptE8P5d20=",["9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=function(e,t,n){return{opacity:e,color:t,matrix:n}},i=function(){var n=1,i=e(4),s=t.create();return i[0]=1,i[1]=1,i[2]=1,i[3]=1,t.identity(s),r(n,i,s)},s=function(e,n){n.opacity=e.opacity,n.color[0]=e.color[0],n.color[1]=e.color[1],n.color[2]=e.color[2],n.color[3]=e.color[3],t.set(e.matrix,n.matrix)},o=function(e){this.depth=e,this.stack=n.range(e),this.index=0;for(var t=0,r=this.stack;t<e;t++)r[t]=i()};return o.prototype={pushState:function(){var e=this.index,t=this.stack;if(e===this.depth-1)throw"Can not push state. Maximum state stack depth of "+this.depth+" was reached.";s(t[e],t[++this.index])},popState:function(){var e=this.index;if(!(e>0))throw"Can not pop state. The state stack is already depleted.";this.index--},getTop:function(){return this.stack[this.index]}},o}),define("GH0nggQp7UVp4RV7Ty6NNe5AI3I5Cw4zpAVEDu8nxiQ=",["FVHd7ApTLsQfGrxEv0dRsRbKKSZlAf1dzrptE8P5d20=","c3TtVd3rj7BPHOmetcKxDeLDfncpdkLzPceSVTUQEMY=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks="],function(e,t,n){"use strict";var r,i=t.formatCanvas([0,0,0,1]),s=new e(32),o=s.getTop(),u=n.create();n.identity(u);var a=n.create();n.identity(a);var f=n.create();n.identity(f);var l=function(e,t,n,i){var s=e,o=e+n,u=t+i,a=t;return s<=0&&o>=r.canvas.width&&u>=r.canvas.height&&a<=0},c=function(e,t,n,i){r.beginPath(),r.rect(e,t,n,i),r.closePath(),r.clip()},h=function(e,t){n.multiply(e,t,f),r.setTransform(f[0],f[1],f[3],f[4],f[6],f[7])},p=function(){_(0,0,r.canvas.width,r.canvas.height);var e=r.canvas.width,t=r.canvas.height;n.ortho(-e/2,e/2,-t/2,t/2,u),n.translate(u,[-e/2,-t/2]),h(a,u)},d=function(){return p(),{clear:T,createTexture:P,drawTexture:N,drawSubTexture:C,fillRect:k,getConfiguration:D,resizeColorBuffer:L,restore:w,rotate:x,save:b,scale:E,setClearColor:y,setFillStyleColor:m,setGlobalAlpha:g,setTransform:O,setViewMatrix:M,transform:A,translate:S,viewport:_}},v=function(e){if(e===undefined)throw"Missing first argument.";return r!==undefined?r:(r=e.getContext("2d"),r===null?null:d())},m=function(e){o.color=t.createRgba(e)},g=function(e){o.opacity=e},y=function(e){i=t.formatCanvas(e)},b=function(){s.pushState(),o=s.getTop()},w=function(){s.popState(),o=s.getTop()},E=function(e){n.scale(o.matrix,e)},S=function(e){n.translate(o.matrix,e)},x=function(e){n.rotate(o.matrix,e)},T=function(){r.save(),r.setTransform(1,0,0,1,0,0),r.fillStyle=i,r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore()},N=function(e,t,n,i,s){if(e===undefined)throw"Texture is undefined";i||(i=1),s||(s=1),r.save(),r.globalAlpha=o.opacity;var u=o.matrix;r.transform(u[0],u[1],u[3],u[4],u[6],u[7]),r.translate(t,n),r.rotate(Math.PI),r.scale(-1,1),r.translate(0,-s),r.drawImage(e.privateImageResource,0,0,i,s),r.restore()},C=function(e,t,n,i,s,u,a,f,l){if(e===undefined)throw"Texture is undefined";r.save(),r.globalAlpha=o.opacity;var c=o.matrix;r.transform(c[0],c[1],c[3],c[4],c[6],c[7]),r.translate(u,a),r.rotate(Math.PI),r.scale(-1,1),r.translate(0,-l),r.drawImage(e.privateImageResource,t,n,i,s,0,0,f,l),r.restore()},k=function(e,n,i,s){r.save(),r.fillStyle=t.formatCanvas(o.color),r.globalAlpha=o.opacity;var u=o.matrix;r.transform(u[0],u[1],u[3],u[4],u[6],u[7]),r.translate(e,n),r.rotate(Math.PI),r.scale(-1,1),r.translate(0,-s),r.fillRect(0,0,i,s),r.restore()},L=function(e,t){r.canvas.width=e,r.canvas.height=t},A=function(e){n.multiply(o.matrix,e)},O=function(e){n.set(e,o.matrix)},M=function(e){n.set(e,u),h(a,u)},_=function(e,t,r,i){n.identity(a),a[0]=r*.5,a[4]=i*.5*-1,a[6]=e+r*.5,a[7]=t+i*.5,h(a,u),l(e,t,r,i)||c(e,t,r,i)},D=function(){return{type:"canvas-2d",width:r.canvas.width,height:r.canvas.height}},P=function(e){return{dimensions:[e.width,e.height],privateImageResource:e}};return v}),define("bT1dgc/3zs3/zhPuJg4Xiztl8XLm5Uc+D+Eqtkbsmd4=",["GH0nggQp7UVp4RV7Ty6NNe5AI3I5Cw4zpAVEDu8nxiQ=","nUDcNlIdSATy78dLW44o5WS90njS6/U29KzWJbZcW7c=","Pcc/biVPUnlHYey99hXN/gpvcMdumN7m5R8g2fh6f9Q="],function(e,t,n){"use strict";var r=0,i=1,s=null,o=function(o,u,a,f,l){var c=n(u,a,f);if(c===null||c===undefined)throw"Could not create canvas node.";if(l===undefined?!0:l===r){s=t(c);if(s)return s}if(l===undefined?!0:l===i){s=e(c);if(s)return s}throw"Could not create a rendering back-end."};return{BACK_END_WEBGL:r,BACK_END_CANVAS:i,createContext2d:o}}),define("dBVCdOd2ydzpZ+4Sx8Q/uZzh/d0W0UPJ9KIqh5lHd9E=",["bT1dgc/3zs3/zhPuJg4Xiztl8XLm5Uc+D+Eqtkbsmd4="],function(e){"use strict";var t=function(t,n){return n==="webgl"?e.BACK_END_WEBGL:n==="canvas-2d"?e.BACK_END_CANVAS:!1},n={renderingBackEnd:{validValues:["webgl","canvas-2d"],configurable:!0,extractor:t}},r={renderingBackEnd:"canvas-2d"};return{defaultOptions:r,validOptions:n}}),define("QaD0f6fU2UVjItxoSDDWeB2ElIaLINNHevlJfzmoDBg=",function(){"use strict";return function(e,t){setTimeout(e,t)}}),define("HFDYWVgRyrhHY2KATklGRkPckqV4jVAACe4xWOlbLYY=",["QaD0f6fU2UVjItxoSDDWeB2ElIaLINNHevlJfzmoDBg="],function(e){"use strict";if(typeof window=="undefined")return function(t){e(t,5)};var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,n=!!t;return n?function(e){t.call(window,e)}:function(t){e(function(){t(new Date)},1e3/60)}}),define("kPqicgHkZUNtccahT1HPrc/4aVLyUwv+cXaSLpXJHxo=",function(){"use strict";return{getCurrentInMs:function(){return Date.now()}}}),define("PF35L31cTrPY3rM0h3RsHDbSwWkzDUR3A+sTdxOq1so=",function(){function C(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=a.call(e);if(r!=a.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&C(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(S.has(e,u)){s++;if(!(o=S.has(t,u)&&C(e[u],t[u],n)))break}if(o){for(u in t)if(S.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new P(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.3";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(S.has(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=S.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=S.toArray(e).reverse();return r&&!i&&(t=S.bind(t,r)),i?S.reduce(s,t,n,r):S.reduce(s,t)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var T=S.some=S.any=function(e,t,r){t||(t=S.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(n=T(e,function(e){return e===t}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.shuffle=function(e){var t=[],n;return x(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},S.sortBy=function(e,t,n){var r=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={},r=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):e.toArray&&S.isFunction(e.toArray)?e.toArray():S.values(e):[]},S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},S.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,t){return S.reduce(e,function(e,n){return S.isArray(n)?e.concat(t?n:S.flatten(n)):(e[e.length]=n,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e,i=[];return e.length<3&&(t=!0),S.reduce(r,function(n,r,s){if(t?S.last(n)!==r||!n.length:!S.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=S.flatten(o.call(arguments,1),!0);return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var N=function(){};S.bind=function(t,n){var r,i;if(t.bind===E&&E)return E.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){N.prototype=t.prototype;var e=new N,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t){var n,r,i,s,o,u,a=S.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},S.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={};return x(S.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return C(e,t,[])},S.isEmpty=function(e){if(e==null)return!0;if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)=="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return a.call(e)=="[object Arguments]"},S.isArguments(arguments)||(S.isArguments=function(e){return!!e&&!!S.has(e,"callee")}),S.isFunction=function(e){return a.call(e)=="[object Function]"},S.isString=function(e){return a.call(e)=="[object String]"},S.isNumber=function(e){return a.call(e)=="[object Number]"},S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},S.isDate=function(e){return a.call(e)=="[object Date]"},S.isRegExp=function(e){return a.call(e)=="[object RegExp]"},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.has=function(e,t){return f.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.result=function(e,t){if(e==null)return null;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){x(S.functions(e),function(t){B(t,S[t]=e[t])})};var k=0;S.uniqueId=function(e){var t=k++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var O in A)A[A[O]]=O;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,_=/\\(\\|'|r|n|t|u2028|u2029)/g,D=function(e){return e.replace(_,function(e,t){return A[t]})};S.template=function(e,t,n){n=S.defaults(n||{},S.templateSettings);var r="__p+='"+e.replace(M,function(e){return"\\"+A[e]}).replace(n.escape||L,function(e,t){return"'+\n_.escape("+D(t)+")+\n'"}).replace(n.interpolate||L,function(e,t){return"'+\n("+D(t)+")+\n'"}).replace(n.evaluate||L,function(e,t){return"';\n"+D(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,S);var s=function(e){return i.call(this,e,S)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},S.chain=function(e){return S(e).chain()};var P=function(e){this._wrapped=e};S.prototype=P.prototype;var H=function(e,t){return t?S(e).chain():e},B=function(e,t){P.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),H(t.apply(S,e),this._chain)}};return S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];P.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],H(n,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];P.prototype[e]=function(){return H(t.apply(this._wrapped,arguments),this._chain)}}),P.prototype.chain=function(){return this._chain=!0,this},P.prototype.value=function(){return this._wrapped},S.noConflict()}),define("nBRERbho9PXv7Yc7UKzlz9aYKuD6BeNrhTlfLlHck4o=",["Njtu1p/lIocQu9jigRUr61eNAmO/ZIR7GBcFv6RVQkk=","8iy3tadpYAcycdlOrGT1fG72hFxCVZncbSaw/640iFE=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";function s(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,s=window.pageXOffset||r.scrollLeft||n.scrollLeft,o=r.clientTop||n.clientTop||0,u=r.clientLeft||n.clientLeft||0,a=t.top+i-o,f=t.left+s-u;return[Math.round(f),Math.round(a)]}var r=function(e,t,n){e.attachEvent?(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n])):e.addEventListener(t,n,!1)},i=function(e){return n.has(f,e)},o=function(e,n){n.stopPropagation(),n.preventDefault();var r=n.changedTouches[0],i=s(this.container),o=this.configurationManager.screenSize,u=[(r.pageX-i[0])/o[0],(r.pageY-i[1])/o[1]];if(!t.isInInterval(u[0],0,1)||!t.isInInterval(u[1],0,1))return;e({type:n.type,position:u})},u=function(t,n){(n.keyCode===e.space||n.keyCode===e["left arrow"]||n.keyCode===e["up arrow"]||n.keyCode===e["right arrow"]||n.keyCode===e["down arrow"])&&n.preventDefault(),t(n)},a=function(e,n){var r=s(this.container),i=this.configurationManager.screenSize,o=[(n.pageX-r[0])/i[0],(n.pageY-r[1])/i[1]];if(!t.isInInterval(o[0],0,1)||!t.isInInterval(o[1],0,1))return;e({type:n.type,position:o})},f={touchstart:{eventName:"touchstart",handler:o},touchend:{eventName:"touchend",handler:o},mousedown:{eventName:"mousedown",handler:a},mouseup:{eventName:"mouseup",handler:a},keydown:{eventName:"keydown",handler:u},keyup:{eventName:"keyup",handler:u}},l=function(e){this.configurationManager=e,this.container=document.getElementById(e.id)},c=function(e,t){if(!i(e))return;var s=f[e];r(document.body,s.eventName,n.bind(s.handler,this,t))},h=function(e){if(!i(e))return;var t=f[e];this.container["on"+t.eventName]=null};return l.prototype={setInputEventListener:c,removeInputEventListener:h},l})